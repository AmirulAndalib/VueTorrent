import{u as K}from"./ArrayPagination-966c0903.js";import{au as Z,u as H,av as t,ad as X,B as A,o as q,C as f,w as J,p as d,X as S,E as Q,Z as c,M as F,as as Y,at as ee,_ as te}from"./index-d34c6ed2.js";import"./faker-c43f92d4.js";import{g as le,$ as ae,K as se,d as v,c as y,M as oe,I as ne,a1 as i,a5 as I,m as e,a3 as a,aa as O,Z as m,u as n,a2 as _,D as w,a7 as V,F as x,a6 as ue,a4 as ie,W as C}from"./vue-64a3430d.js";import{d as re}from"./dayjs.min-0ab99f7b.js";import"./vuetify-ba474ef2.js";const de={class:"pa-3"},me={style:{"font-size":"1.6em !important"},class:"subtitle-1 ml-2"},pe={class:"d-flex justify-end"},ce=le({__name:"Logs",setup(ge){const M=ae(),{t:p}=se(),L=Z(),$=H(),E=v([{title:p("logs.filters.sortBy.id"),value:"id"},{title:p("logs.filters.sortBy.type"),value:"type"},{title:p("logs.filters.sortBy.message"),value:"message"},{title:p("logs.filters.sortBy.timestamp"),value:"timestamp"}]),h=v([{title:t[t.NORMAL],value:t.NORMAL},{title:t[t.INFO],value:t.INFO},{title:t[t.WARNING],value:t.WARNING},{title:t[t.CRITICAL],value:t.CRITICAL}]),u=v([t.NORMAL,t.INFO,t.WARNING,t.CRITICAL]),N=v(["id"]),U=y(()=>L.logs),T=y(()=>U.value.filter(l=>u.value.includes(l.type))),k=y(()=>u.value.length>0),B=y(()=>u.value.length===h.value.length),{paginatedResults:W,currentPage:r,pageCount:g}=K(T,30),R=()=>{M.push({name:"dashboard"})},j=l=>`logtype-${t[l?.type]?.toLowerCase()}`,D=l=>t[l.type],G=l=>re(l.timestamp*1e3).format($.dateFormat),P=()=>{B.value?u.value=[]:u.value=h.value.map(l=>l.value)},b=l=>{l.key==="Escape"&&R()};return oe(()=>{document.addEventListener("keydown",b),X(L.fetchLogs,15e3),L.fetchLogs(-1)}),ne(()=>{document.removeEventListener("keydown",b)}),(l,o)=>(i(),I("div",de,[e(A,{"no-gutters":"",align:"center",justify:"center"},{default:a(()=>[e(f,null,{default:a(()=>[O("h1",me,m(n(p)("logs.title")),1)]),_:1}),e(f,null,{default:a(()=>[O("div",pe,[e(J,{icon:"mdi-close",variant:"plain",onClick:R})])]),_:1})]),_:1}),e(q,null,{default:a(()=>[e(d,null,{default:a(()=>[e(A,null,{default:a(()=>[e(f,{cols:"6"},{default:a(()=>[e(S,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=s=>u.value=s),items:h.value,label:l.$t("logs.filters.type"),"hide-details":"",multiple:"",chips:""},{"prepend-item":a(()=>[e(d,{title:l.$t("common.selectAll"),onClick:P},{prepend:a(()=>[e(Q,{indeterminate:k.value&&!B.value,"model-value":k.value},null,8,["indeterminate","model-value"])]),_:1},8,["title"]),e(c)]),_:1},8,["modelValue","items","label"])]),_:1}),e(f,{cols:"6"},{default:a(()=>[e(S,{modelValue:N.value,"onUpdate:modelValue":o[1]||(o[1]=s=>N.value=s),items:E.value,label:l.$t("logs.filters.sortBy.label"),"hide-details":"",multiple:"",chips:""},null,8,["modelValue","items","label"])]),_:1})]),_:1})]),_:1}),e(c,{class:"my-3",thickness:"5"}),n(g)>1?(i(),_(d,{key:0},{default:a(()=>[e(F,{modelValue:n(r),"onUpdate:modelValue":o[2]||(o[2]=s=>w(r)?r.value=s:null),length:n(g),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):V("",!0),e(c),(i(!0),I(x,null,ue(n(W),(s,z)=>(i(),I(x,null,[z>0?(i(),_(c,{key:0})):V("",!0),e(d,{class:ie(j(s))},{default:a(()=>[e(Y,null,{default:a(()=>[C(m(s.id)+") "+m(s.message),1)]),_:2},1024),e(ee,null,{default:a(()=>[C(m(D(s))+" | "+m(G(s)),1)]),_:2},1024)]),_:2},1032,["class"])],64))),256)),T.value.length===0?(i(),_(d,{key:1},{default:a(()=>[C(m(l.$t("logs.emptyLogList")),1)]),_:1})):V("",!0),e(c),n(g)>1?(i(),_(d,{key:2},{default:a(()=>[e(F,{modelValue:n(r),"onUpdate:modelValue":o[3]||(o[3]=s=>w(r)?r.value=s:null),length:n(g),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):V("",!0)]),_:1})]))}});const he=te(ce,[["__scopeId","data-v-6b0f2595"]]);export{he as default};
