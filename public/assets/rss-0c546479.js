import{at as v,Q as t}from"./index-80cae97b.js";import{r as d,d as k,c as S}from"./vue-aae79161.js";const b=v("rss",()=>{const r=d([]),i=d([]),c=k({title:"",unread:!1}),o=S(()=>{const e=[],a=new Set;return r.value.forEach(n=>{n.articles&&n.articles.forEach(s=>{a.has(s.id)||c.unread&&s.isRead||(a.add(s.id),e.push({feedName:n.name,parsedDate:new Date(s.date),...s}))})}),e});async function f(e){await t.refreshFeed(e)}async function l(e,a){await t.createFeed({name:e,url:a})}async function m(e,a){await t.setRule(e,a)}async function R(e,a){await t.editFeed(e,a)}async function w(e,a){await t.renameRule(e,a)}async function y(e){await t.deleteFeed(e)}async function h(e){await t.deleteRule(e)}async function u(){r.value=await t.getFeeds(!0)}async function F(e){await t.markAsRead(e.feedName,e.id);const a=r.value.find(s=>s.name===e.feedName);if(!a||!a.articles)return;const n=a.articles.find(s=>s.id===e.id);n&&(n.isRead=!0)}async function g(){r.value.forEach(e=>{e.articles&&e.articles.forEach(async a=>{a.isRead||await t.markAsRead(e.name,a.id)})}),await u()}async function A(){i.value=await t.getRules()}async function p(e){return await t.getMatchingArticles(e)}return{feeds:r,rules:i,filters:c,articles:o,refreshFeed:f,createFeed:l,setRule:m,editFeed:R,renameRule:w,deleteFeed:y,deleteRule:h,fetchFeeds:u,markArticleAsRead:F,markAllAsRead:g,fetchRules:A,fetchMatchingArticles:p}},{persist:{enabled:!0,strategies:[{storage:sessionStorage,key:"vuetorrent_rss"}]}});export{b as u};
