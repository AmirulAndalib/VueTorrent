import{A as L,$ as r,a2 as w,a7 as h,Z as m,V as I,c as D,a0 as x,a1 as o,F as Y,a3 as te,u as n,D as t,R as We,I as N,a5 as Ke,ab as Ze,a4 as F,ac as He,ad as ze,r as P,d as qe,C as me,h as Ge,Y as H,ag as ue,i as ee,_ as je,ah as et,ai as tt,w as at,J as ot,aj as lt,q as Me,O as Te,Q as Ve}from"./vue-aae79161.js";import{V as Re,_ as Ce,u as ae,f as nt,a as st,T as E,b as rt,c as it,d as dt,e as ut,g as ce,h as X,i as Ye,j as pe,k as z,l as xe,D as M,m as $e,n as ve,o as Xe,p as De,q as Z,r as Ie,s as Le,t as Pe,v as q,w as Ae,x as A,y as Ee,z as ct,A as we,B as Se,C as de,E as Be,F as Je,G as mt,H as K,I as Qe,J as pt,K as vt,L as Ne,M as ht,N as _t,O as Oe}from"./index-669d7c1b.js";import{_ as ft}from"./MoveTorrentDialog.vue_vue_type_script_setup_true_lang-aabca186.js";import{d as Ue}from"./dayjs.min-c4b8f3f1.js";import{u as bt}from"./ArrayPagination-59195bf9.js";import{d as gt}from"./index-99a8202c.js";const yt={class:"d-flex flex-column"},kt={class:"text-caption text-grey"},Tt={class:"text-caption text-grey"},Vt=L({__name:"ItemAmount",props:{torrent:{},title:{},value:{},total:{}},setup(V){return(e,l)=>(r(),w("div",yt,[h("div",kt,m(e.$t(`torrent.properties.${e.title}`)),1),h("div",null,[I(m(e.torrent[e.value])+" ",1),h("span",Tt," / "+m(e.torrent[e.total]),1)])]))}}),$t={class:"d-flex flex-column"},wt={class:"text-caption text-grey"},Bt={class:"d-flex flex-row gap"},xt=L({__name:"ItemChip",props:{torrent:{},title:{},value:{},color:{}},setup(V){const e=V,l=D(()=>{const a=e.torrent[e.value],p=typeof a;if(p==="string")return a.length>0?[a]:[];if(p==="object")return a});return(a,p)=>(r(),w("div",$t,[h("div",wt,m(a.$t(`torrent.properties.${a.title}`)),1),h("div",Bt,[!l.value||l.value.length<1?(r(),x(Re,{key:0,color:a.color.replace("$1",a.torrent[a.value]),variant:"flat"},{default:o(()=>[I(m(a.$t(`torrent.properties.empty_${a.value}`)),1)]),_:1},8,["color"])):(r(!0),w(Y,{key:1},te(l.value,g=>(r(),x(Re,{color:a.color.replace("$1",a.torrent.state),variant:"flat"},{default:o(()=>[I(m(g),1)]),_:2},1032,["color"]))),256))])]))}});const St=Ce(xt,[["__scopeId","data-v-8eb4906a"]]),Ct={class:"d-flex flex-column"},Dt={class:"text-caption text-grey"},It={class:"text-caption text-grey"},Lt=L({__name:"ItemData",props:{torrent:{},title:{},value:{}},setup(V){const e=ae();return(l,a)=>(r(),w("div",Ct,[h("div",Dt,m(l.$t(`torrent.properties.${l.title}`)),1),h("div",null,[I(m(n(nt)(l.torrent[l.value],n(e).useBinarySize))+" ",1),h("span",It,m(n(st)(l.torrent[l.value],n(e).useBinarySize)),1)])]))}}),Pt={class:"d-flex flex-column"},At={class:"text-caption text-grey"},Et={key:0},Ut={key:1},Mt=L({__name:"ItemDateTime",props:{torrent:{},title:{},value:{}},setup(V){const e=ae();return(l,a)=>(r(),w("div",Pt,[h("div",At,m(l.$t(`torrent.properties.${l.title}`)),1),h("div",null,[l.torrent[l.value]>0?(r(),w("span",Et,m(n(Ue)(l.torrent[l.value]*1e3).format(n(e).dateFormat??"DD/MM/YYYY, HH:mm:ss")),1)):(r(),w("span",Ut,m(l.$t("dashboard.not_complete")),1))])]))}}),Rt={class:"d-flex flex-column"},Nt={class:"text-caption text-grey"},Ot={key:0},Ft={key:1},Kt="D[d] H[h] m[m] s[s]",Ht=L({__name:"ItemDuration",props:{torrent:{},title:{},value:{}},setup(V){return(e,l)=>(r(),w("div",Rt,[h("div",Nt,m(e.$t(`torrent.properties.${e.title}`)),1),h("div",null,[e.torrent[e.value]>0?(r(),w("span",Ot,m(n(Ue).duration(e.torrent[e.value],"seconds").format(Kt)),1)):(r(),w("span",Ft,m(e.$t("dashboard.not_complete")),1))])]))}}),zt={class:"d-flex flex-column"},qt={class:"text-caption text-grey"},Gt=L({__name:"ItemPercent",props:{torrent:{},title:{},value:{}},setup(V){const e=V,l=D(()=>[E.UPLOADING,E.CHECKING_UP,E.FORCED_UP,E.ALLOCATING,E.DOWNLOADING,E.META_DL,E.CHECKING_DL,E.FORCED_DL,E.CHECKING_RESUME_DATA,E.MOVING].includes(e.torrent.state));return(a,p)=>(r(),w("div",zt,[h("div",qt,m(a.$t(`torrent.properties.${a.title}`)),1),t(it,{"model-value":a.torrent[a.value],max:1,striped:l.value,height:20,color:`torrent-${a.torrent.state}`,rounded:"sm",style:{width:"10em"}},{default:o(()=>[I(m(n(rt)(a.torrent[a.value])),1)]),_:1},8,["model-value","striped","color"])]))}}),jt={class:"d-flex flex-column"},Yt={class:"text-caption text-grey"},Xt=L({__name:"ItemRelativeTime",props:{torrent:{},title:{},value:{}},setup(V){return(e,l)=>(r(),w("div",jt,[h("div",Yt,m(e.$t(`torrent.properties.${e.title}`)),1),h("div",null,[h("span",null,m(n(Ue)(e.torrent[e.value]*1e3).fromNow()),1)])]))}}),Jt={class:"d-flex flex-column"},Qt={class:"text-caption text-grey"},Wt={class:"text-caption text-grey"},Zt=L({__name:"ItemSpeed",props:{torrent:{},title:{},value:{}},setup(V){const e=ae();return(l,a)=>(r(),w("div",Jt,[h("div",Qt,m(l.$t(`torrent.properties.${l.title}`)),1),h("div",null,[I(m(n(dt)(l.torrent[l.value],n(e).useBitSpeed))+" ",1),h("span",Wt,m(n(ut)(l.torrent[l.value],n(e).useBitSpeed)),1)])]))}}),ea={class:"d-flex flex-column"},ta={class:"text-caption text-grey"},aa=L({__name:"ItemText",props:{torrent:{},title:{},value:{}},setup(V){return(e,l)=>(r(),w("div",ea,[h("div",ta,m(e.$t(`torrent.properties.${e.title}`)),1),h("div",null,m(e.torrent[e.value]),1)]))}}),oa={class:"d-flex gap flex-wrap"},la=L({__name:"Torrent",props:{torrent:{}},setup(V){const e=V,l=ce(),a=X(),p=ae(),g=D(()=>(e.torrent.progress===1?p.doneTorrentProperties:p.busyTorrentProperties).filter(y=>y.active).sort((y,_)=>y.order-_.order));function $(f){f.shiftKey?l.spanTorrentSelection(a.getTorrentIndexByHash(e.torrent.hash)):(xe(f)||l.isSelectionMultiple)&&(l.isSelectionMultiple=!0,l.toggleSelect(e.torrent.hash))}const s=f=>{switch(f){case M.AMOUNT:return Vt;case M.CHIP:return St;case M.DATA:return Lt;case M.DATETIME:return Mt;case M.DURATION:return Ht;case M.PERCENT:return Gt;case M.RELATIVE:return Xt;case M.SPEED:return Zt;case M.TEXT:default:return aa}},c=D(()=>l.isTorrentInSelection(e.torrent.hash));return(f,y)=>(r(),x(z,{class:Ke(`sideborder ${f.torrent.state} pointer`),color:c.value?`torrent-${f.torrent.state}-darken-3`:void 0,width:"100%",onClick:$},{default:o(()=>[t(Ye,{class:"font-weight-bold text-wrap"},{default:o(()=>[I(m(f.torrent.name),1)]),_:1}),t(pe,null,{default:o(()=>[h("div",oa,[(r(!0),w(Y,null,te(g.value,_=>(r(),x(We(s(_.type)),N({torrent:f.torrent},_.props),null,16,["torrent"]))),256))])]),_:1})]),_:1},8,["class","color"]))}});const na=Ce(la,[["__scopeId","data-v-43ae49b8"]]),sa={class:"d-flex"},ra={key:2},ia={key:3},da=L({__name:"RightClickMenuEntry",props:{text:{},icon:{},action:{type:Function},hidden:{type:Boolean},disabled:{type:Boolean},disabledText:{},disabledIcon:{},divider:{type:Boolean},children:{}},setup(V){return(e,l)=>{const a=Ze("RightClickMenuEntry",!0);return e.hidden?F("",!0):(r(),x(Z,{key:0,class:"px-3 pointer",disabled:e.disabled,onClick:e.action},{default:o(()=>[h("div",sa,[e.disabled&&e.disabledIcon?(r(),x($e,{key:0,class:"mr-2"},{default:o(()=>[I(m(e.disabledIcon),1)]),_:1})):e.icon?(r(),x($e,{key:1,class:"mr-2"},{default:o(()=>[I(m(e.icon),1)]),_:1})):F("",!0),e.disabled&&e.disabledText?(r(),w("span",ra,m(e.disabledText),1)):(r(),w("span",ia,m(e.text),1)),t(ve),e.children?(r(),x($e,{key:4},{default:o(()=>[I("mdi-chevron-right")]),_:1})):F("",!0)]),e.children?(r(),x(Xe,{key:0,activator:"parent","open-on-hover":!0,"open-on-click":!0,"close-delay":"0","open-delay":"0",location:"right"},{default:o(()=>[t(De,null,{default:o(()=>[(r(!0),w(Y,null,te(e.children,p=>(r(),x(a,He(ze(p)),null,16))),256))]),_:1})]),_:1})):F("",!0)]),_:1},8,["disabled","onClick"]))}}}),ua=L({__name:"RenameTorrentDialog",props:{guid:{},hash:{}},setup(V){const e=V,{isOpened:l}=Ie(e.guid),{t:a}=Le(),p=X(),g=P(),$=P(),s=P(!1),c=qe({newName:""}),f=[B=>!!B||a("dialogs.renameTorrent.required"),B=>B!==_.value||a("dialogs.renameTorrent.sameName")],y=D(()=>p.getTorrentByHash(e.hash)),_=D(()=>y.value?.name);async function S(){await $.value?.validate(),s.value&&(await p.renameTorrent(e.hash,c.newName),C())}const C=()=>{l.value=!1};return me(()=>{c.newName=y.value?.name||""}),Ge(()=>{g.value?.select()}),(B,k)=>(r(),x(Ee,{modelValue:n(l),"onUpdate:modelValue":k[3]||(k[3]=d=>ee(l)?l.value=d:null)},{default:o(()=>[t(z,null,{default:o(()=>[t(Ye,null,{default:o(()=>[I(m(B.$t("dialogs.renameTorrent.title")),1)]),_:1}),t(pe,null,{default:o(()=>[t(n(Pe),{modelValue:s.value,"onUpdate:modelValue":k[1]||(k[1]=d=>s.value=d),ref_key:"form",ref:$,onSubmit:k[2]||(k[2]=H(()=>{},["prevent"]))},{default:o(()=>[_.value?(r(),x(q,{key:0,"model-value":_.value,disabled:"",label:B.$t("dialogs.renameTorrent.oldName")},null,8,["model-value","label"])):F("",!0),t(q,{modelValue:c.newName,"onUpdate:modelValue":k[0]||(k[0]=d=>c.newName=d),ref_key:"field",ref:g,rules:f,autofocus:"",label:B.$t("dialogs.renameTorrent.newName"),onKeydown:ue(S,["enter"])},null,8,["modelValue","label","onKeydown"])]),_:1},8,["modelValue"])]),_:1}),t(Ae,null,{default:o(()=>[t(ve),t(A,{color:"error",onClick:C},{default:o(()=>[I(m(B.$t("common.cancel")),1)]),_:1}),t(A,{color:"accent",disabled:!s.value,onClick:S},{default:o(()=>[I(m(B.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),j=-2,R=-1,ca=L({__name:"ShareLimitDialog",props:{guid:{},hash:{}},setup(V){const e=V,{isOpened:l}=Ie(e.guid),a=X(),p=P(!1),g=P("global"),$=P(!1),s=P(0),c=P(!1),f=P(0),y=P(!1),_=P(0),S=D(()=>g.value!=="enabled");function C(){l.value=!1}async function B(){switch(g.value){case"global":await a.setShareLimit([e.hash],j,j,j);break;case"disabled":await a.setShareLimit([e.hash],R,R,R);break;case"enabled":await a.setShareLimit([e.hash],$.value?s.value:R,c.value?f.value:R,y.value?_.value:R);break}C()}return me(async()=>{const k=a.getTorrentByHash(e.hash);if(!k)return C();const d=k.ratio_limit,b=k.seeding_time_limit,U=k.inactive_seeding_time_limit;d===j&&b===j&&U===j?g.value="global":d===R&&b===R&&U===R?g.value="disabled":(g.value="enabled",$.value=d>=0,s.value=$.value?d:0,c.value=b>=0,f.value=c.value?b:0,y.value=U>=0,_.value=y.value?U:0)}),(k,d)=>(r(),x(Ee,{modelValue:n(l),"onUpdate:modelValue":d[9]||(d[9]=b=>ee(l)?l.value=b:null),"max-width":"500"},{default:o(()=>[t(z,{title:k.$t("dialogs.share_limit.title")},{default:o(()=>[t(pe,null,{default:o(()=>[t(Pe,{modelValue:p.value,"onUpdate:modelValue":d[7]||(d[7]=b=>p.value=b),onSubmit:d[8]||(d[8]=H(()=>{},["prevent"])),onKeydown:ue(H(B,["prevent"]),["enter"])},{default:o(()=>[t(ct,{modelValue:g.value,"onUpdate:modelValue":d[0]||(d[0]=b=>g.value=b)},{default:o(()=>[t(we,{label:k.$t("dialogs.share_limit.global"),value:"global"},null,8,["label"]),t(we,{label:k.$t("dialogs.share_limit.disabled"),value:"disabled"},null,8,["label"]),t(we,{label:k.$t("dialogs.share_limit.enabled"),value:"enabled"},null,8,["label"])]),_:1},8,["modelValue"]),t(Se,null,{default:o(()=>[t(de,{cols:"12",class:"d-flex align-center"},{default:o(()=>[h("span",null,[t(Be,{modelValue:$.value,"onUpdate:modelValue":d[1]||(d[1]=b=>$.value=b),disabled:S.value},null,8,["modelValue","disabled"])]),t(q,{modelValue:s.value,"onUpdate:modelValue":d[2]||(d[2]=b=>s.value=b),disabled:S.value||!$.value,density:"compact","hide-details":"",label:k.$t("dialogs.share_limit.ratio_limit")},null,8,["modelValue","disabled","label"])]),_:1}),t(de,{cols:"12",class:"d-flex align-center"},{default:o(()=>[h("span",null,[t(Be,{modelValue:c.value,"onUpdate:modelValue":d[3]||(d[3]=b=>c.value=b),disabled:S.value},null,8,["modelValue","disabled"])]),t(q,{modelValue:f.value,"onUpdate:modelValue":d[4]||(d[4]=b=>f.value=b),disabled:S.value||!c.value,density:"compact","hide-details":"",label:k.$t("dialogs.share_limit.seeding_time_limit")},null,8,["modelValue","disabled","label"])]),_:1}),t(de,{cols:"12",class:"d-flex align-center"},{default:o(()=>[h("span",null,[t(Be,{modelValue:y.value,"onUpdate:modelValue":d[5]||(d[5]=b=>y.value=b),disabled:S.value},null,8,["modelValue","disabled"])]),t(q,{modelValue:_.value,"onUpdate:modelValue":d[6]||(d[6]=b=>_.value=b),disabled:S.value||!y.value,density:"compact","hide-details":"",label:k.$t("dialogs.share_limit.inactive_seeding_time_limit")},null,8,["modelValue","disabled","label"])]),_:1})]),_:1})]),_:1},8,["modelValue","onKeydown"])]),_:1}),t(Ae,null,{default:o(()=>[t(ve),t(A,{color:"error",onClick:C},{default:o(()=>[I(m(k.$t("common.cancel")),1)]),_:1}),t(A,{color:"accent",disabled:!p.value,onClick:B},{default:o(()=>[I(m(k.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]))}}),Fe=L({__name:"SpeedLimitDialog",props:{guid:{},hash:{},mode:{}},setup(V){const e=V,{isOpened:l}=Ie(e.guid),a=X(),p=P(!1),g=P(0);function $(){l.value=!1}async function s(){const c=Math.max(0,g.value)*1e3;switch(e.mode){case"download":await a.setDownloadLimit(c,[e.hash]);break;case"upload":await a.setUploadLimit(c,[e.hash]);break}$()}return me(async()=>{const c=a.getTorrentByHash(e.hash);if(!c)return $();switch(e.mode){case"download":g.value=Math.max(0,Math.round(c.dl_limit/1e3));break;case"upload":g.value=Math.max(0,Math.round(c.up_limit/1e3));break}}),(c,f)=>(r(),x(Ee,{modelValue:n(l),"onUpdate:modelValue":f[3]||(f[3]=y=>ee(l)?l.value=y:null)},{default:o(()=>[t(z,{title:c.$t(`dialogs.speed_limit.${c.mode}`)},{default:o(()=>[t(pe,null,{default:o(()=>[t(Pe,{modelValue:p.value,"onUpdate:modelValue":f[1]||(f[1]=y=>p.value=y),onSubmit:f[2]||(f[2]=H(()=>{},["prevent"])),onKeydown:ue(H(s,["prevent"]),["enter"])},{default:o(()=>[t(q,{modelValue:g.value,"onUpdate:modelValue":f[0]||(f[0]=y=>g.value=y),type:"number",autofocus:"",clearable:"",label:c.$t("dialogs.speed_limit.label"),"prepend-inner-icon":"mdi-speedometer",suffix:"kB/s",onKeydown:ue(H(s,["prevent"]),["enter"])},null,8,["modelValue","label","onKeydown"])]),_:1},8,["modelValue","onKeydown"])]),_:1}),t(Ae,null,{default:o(()=>[t(ve),t(A,{color:"error",onClick:$},{default:o(()=>[I(m(c.$t("common.cancel")),1)]),_:1}),t(A,{color:"accent",disabled:!p.value,onClick:s},{default:o(()=>[I(m(c.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]))}}),he=V=>(et("data-v-18d5c938"),V=V(),tt(),V),ma={class:"d-flex justify-space-around"},pa=he(()=>h("span",null,"Resume",-1)),va=he(()=>h("span",null,"Force Resume",-1)),ha=he(()=>h("span",null,"Pause",-1)),_a=he(()=>h("span",null,"Delete",-1)),fa=L({__name:"RightClickMenu",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(V,{emit:e}){const l=V,{t:a}=Le(),p=je(),g=ce(),$=Je(),s=X(),c=mt(),f=D({get:()=>l.modelValue,set:T=>e("update:modelValue",T)}),y=D(()=>g.selectedTorrents.length>1),_=D(()=>g.selectedTorrents),S=D(()=>_.value[0]),C=D(()=>s.getTorrentByHash(S.value)),B=D(()=>g.selectedTorrents.map(s.getTorrentByHash).filter(T=>!!T)),k=D(()=>[{name:""},...s.categories]);async function d(){await s.resumeTorrents(_)}async function b(){await s.forceResumeTorrents(_)}async function U(){await s.pauseTorrents(_)}function _e(){$.createDialog(Qe,{hashes:[...g.selectedTorrents]})}function O(){$.createDialog(ft,{hashes:[...g.selectedTorrents]})}function oe(){$.createDialog(ua,{hash:g.selectedTorrents[0]})}async function fe(){await s.recheckTorrents(_)}async function le(){await s.reannounceTorrents(_)}async function G(){await s.toggleSeqDl(_)}async function be(){await s.toggleFLPiecePrio(_)}async function ge(){await s.toggleAutoTmm(_,!C.value?.auto_tmm)}function ne(T){return B.value.every(i=>i&&i.tags&&i.tags.includes(T))}async function J(T){ne(T)?await s.removeTorrentTags(_.value,[T]):await s.addTorrentTags(_.value,[T])}async function Q(T){await navigator.clipboard.writeText(T)}function ye(){$.createDialog(Fe,{hash:S.value,mode:"download"})}function se(){$.createDialog(Fe,{hash:S.value,mode:"upload"})}function re(){$.createDialog(ca,{hash:S.value})}async function ie(){_.value.forEach(T=>{s.exportTorrent(T).then(i=>{const u=window.URL.createObjectURL(i),v=document.createElement("a");v.href=u,v.style.opacity="0",v.setAttribute("download",`${T}.torrent`),document.body.appendChild(v),v.click(),document.body.removeChild(v)})})}const ke=D(()=>[{text:a("dashboard.right_click.advanced.title"),icon:"mdi-head-cog",children:[{text:a("dashboard.right_click.advanced.change_location"),icon:"mdi-folder",action:O},{text:a("dashboard.right_click.advanced.rename"),icon:"mdi-rename-box",hidden:y.value,action:oe},{text:a("dashboard.right_click.advanced.recheck"),icon:"mdi-playlist-check",action:fe},{text:a("dashboard.right_click.advanced.reannounce"),icon:"mdi-bullhorn",action:le},{text:a("dashboard.right_click.advanced.seq_dl"),icon:C.value?.seq_dl?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:G},{text:a("dashboard.right_click.advanced.f_l_prio"),icon:C.value?.f_l_piece_prio?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:be},{text:a("dashboard.right_click.advanced.auto_tmm"),icon:C.value?.auto_tmm?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:ge}]},{text:a("dashboard.right_click.priority.title"),icon:"mdi-priority-high",hidden:!c.preferences.queueing_enabled,children:[{text:a("dashboard.right_click.priority.top"),icon:"mdi-priority-high",action:async()=>await s.setTorrentPriority(_.value,"topPrio")},{text:a("dashboard.right_click.priority.increase"),icon:"mdi-arrow-up",action:async()=>await s.setTorrentPriority(_.value,"increasePrio")},{text:a("dashboard.right_click.priority.decrease"),icon:"mdi-arrow-down",action:async()=>await s.setTorrentPriority(_.value,"decreasePrio")},{text:a("dashboard.right_click.priority.bottom"),icon:"mdi-priority-low",action:async()=>await s.setTorrentPriority(_.value,"bottomPrio")}]},{text:a("dashboard.right_click.tags.title"),icon:"mdi-tag",disabled:s.tags.length===0,disabledText:a("dashboard.right_click.tags.disabled_title"),disabledIcon:"mdi-tag-off",children:s.tags.map(T=>({text:T,icon:ne(T)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:async()=>await J(T)}))},{text:a("dashboard.right_click.category.title"),icon:"mdi-label",disabled:s.categories.length===0,disabledText:a("dashboard.right_click.category.disabled_title"),disabledIcon:"mdi-label-off",children:k.value.map(T=>({text:T.name===""?a("dashboard.right_click.category.clear"):T.name,action:async()=>await s.setTorrentCategory(_.value,T.name)}))},{text:a("dashboard.right_click.speed_limit.title"),icon:"mdi-speedometer-slow",children:[{text:a("dashboard.right_click.speed_limit.download"),icon:"mdi-download",action:ye},{text:a("dashboard.right_click.speed_limit.upload"),icon:"mdi-upload",action:se},{text:a("dashboard.right_click.speed_limit.share"),icon:"mdi-account-group",action:re}]},{text:a("dashboard.right_click.copy.title"),icon:"mdi-content-copy",hidden:y.value,children:[{text:a("dashboard.right_click.copy.name"),icon:"mdi-alphabetical-variant",action:async()=>C.value&&await Q(C.value.name)},{text:a("dashboard.right_click.copy.hash"),icon:"mdi-pound",action:async()=>await Q(S.value)},{text:a("dashboard.right_click.copy.magnet"),icon:"mdi-magnet",action:async()=>C.value&&await Q(C.value.magnet)}]},{text:a("dashboard.right_click.export",g.selectedTorrents.length),icon:y.value?"mdi-download-multiple":"mdi-download",action:ie},{text:a("dashboard.right_click.info"),icon:"mdi-information",hidden:y.value,action:()=>p.push({name:"torrentDetail",params:{hash:S.value}})}]);return(T,i)=>f.value?(r(),x(Xe,{key:0,modelValue:f.value,"onUpdate:modelValue":i[0]||(i[0]=u=>f.value=u),activator:"parent","close-on-content-click":!0,transition:"slide-y-transition","scroll-strategy":"none"},{default:o(()=>[t(De,null,{default:o(()=>[t(Z,null,{default:o(()=>[h("div",ma,[t(K,{location:"top"},{activator:o(({props:u})=>[t(A,N({density:"compact",variant:"plain",icon:"mdi-play"},u,{onClick:d}),null,16)]),default:o(()=>[pa]),_:1}),t(K,{location:"top"},{activator:o(({props:u})=>[t(A,N({density:"compact",variant:"plain",icon:"mdi-fast-forward"},u,{onClick:b}),null,16)]),default:o(()=>[va]),_:1}),t(K,{location:"top"},{activator:o(({props:u})=>[t(A,N({density:"compact",variant:"plain",icon:"mdi-pause"},u,{onClick:U}),null,16)]),default:o(()=>[ha]),_:1}),t(K,{location:"top"},{activator:o(({props:u})=>[t(A,N({color:"red",density:"compact",variant:"plain",icon:"mdi-delete-forever"},u,{onClick:_e}),null,16)]),default:o(()=>[_a]),_:1})])]),_:1}),(r(!0),w(Y,null,te(ke.value,u=>(r(),x(da,He(ze(u)),null,16))),256))]),_:1})]),_:1},8,["modelValue"])):F("",!0)}});const ba=Ce(fa,[["__scopeId","data-v-18d5c938"]]),ga={class:"pt-4 px-1 px-sm-5"},ya={class:"pa-0",style:{width:"10em"}},ka={class:"text-uppercase",style:{float:"right","font-size":"0.8em"}},Ta={class:"text-grey"},Va={key:0,class:"mt-5 text-xs-center"},$a={class:"text-grey"},wa={key:1},Ba={class:"d-flex align-center"},Pa=L({__name:"Dashboard",setup(V){const{t:e}=Le(),l=je(),a=pt(),p=ce(),g=Je(),{currentPage:$,filteredTorrents:s,isSelectionMultiple:c,searchFilter:f,selectedTorrents:y,sortOptions:_,torrentCountString:S}=vt(ce()),C=X(),B=ae(),k=[{value:"added_on",title:e("dashboard.sortBy.added_on")},{value:"amount_left",title:e("dashboard.sortBy.amount_left")},{value:"auto_tmm",title:e("dashboard.sortBy.auto_tmm")},{value:"availability",title:e("dashboard.sortBy.availability")},{value:"avg_download_speed",title:e("dashboard.sortBy.avg_download_speed")},{value:"avg_upload_speed",title:e("dashboard.sortBy.avg_upload_speed")},{value:"category",title:e("dashboard.sortBy.category")},{value:"completed",title:e("dashboard.sortBy.completed")},{value:"completion_on",title:e("dashboard.sortBy.completion_on")},{value:"content_path",title:e("dashboard.sortBy.content_path")},{value:"dl_limit",title:e("dashboard.sortBy.dl_limit")},{value:"dlspeed",title:e("dashboard.sortBy.dlspeed")},{value:"download_path",title:e("dashboard.sortBy.download_path")},{value:"downloaded",title:e("dashboard.sortBy.downloaded")},{value:"downloaded_session",title:e("dashboard.sortBy.downloaded_session")},{value:"eta",title:e("dashboard.sortBy.eta")},{value:"f_l_piece_prio",title:e("dashboard.sortBy.f_l_piece_prio")},{value:"force_start",title:e("dashboard.sortBy.force_start")},{value:"globalSpeed",title:e("dashboard.sortBy.globalSpeed")},{value:"globalVolume",title:e("dashboard.sortBy.globalVolume")},{value:"hash",title:e("dashboard.sortBy.hash")},{value:"infohash_v1",title:e("dashboard.sortBy.infohash_v1")},{value:"infohash_v2",title:e("dashboard.sortBy.infohash_v2")},{value:"last_activity",title:e("dashboard.sortBy.last_activity")},{value:"magnet_uri",title:e("dashboard.sortBy.magnet_uri")},{value:"max_ratio",title:e("dashboard.sortBy.max_ratio")},{value:"max_seeding_time",title:e("dashboard.sortBy.max_seeding_time")},{value:"name",title:e("dashboard.sortBy.name")},{value:"num_complete",title:e("dashboard.sortBy.num_complete")},{value:"num_incomplete",title:e("dashboard.sortBy.num_incomplete")},{value:"num_leechs",title:e("dashboard.sortBy.num_leechs")},{value:"num_seeds",title:e("dashboard.sortBy.num_seeds")},{value:"priority",title:e("dashboard.sortBy.priority")},{value:"progress",title:e("dashboard.sortBy.progress")},{value:"ratio",title:e("dashboard.sortBy.ratio")},{value:"ratio_limit",title:e("dashboard.sortBy.ratio_limit")},{value:"save_path",title:e("dashboard.sortBy.save_path")},{value:"seeding_time",title:e("dashboard.sortBy.seeding_time")},{value:"seeding_time_limit",title:e("dashboard.sortBy.seeding_time_limit")},{value:"seen_complete",title:e("dashboard.sortBy.seen_complete")},{value:"seq_dl",title:e("dashboard.sortBy.seq_dl")},{value:"size",title:e("dashboard.sortBy.size")},{value:"state",title:e("dashboard.sortBy.state")},{value:"super_seeding",title:e("dashboard.sortBy.super_seeding")},{value:"tags",title:e("dashboard.sortBy.tags")},{value:"time_active",title:e("dashboard.sortBy.time_active")},{value:"total_size",title:e("dashboard.sortBy.total_size")},{value:"tracker",title:e("dashboard.sortBy.tracker")},{value:"trackers_count",title:e("dashboard.sortBy.trackers_count")},{value:"up_limit",title:e("dashboard.sortBy.up_limit")},{value:"uploaded",title:e("dashboard.sortBy.uploaded")},{value:"uploaded_session",title:e("dashboard.sortBy.uploaded_session")},{value:"upspeed",title:e("dashboard.sortBy.upspeed")}].sort((i,u)=>i.title.localeCompare(u.title));k.splice(0,0,{value:"",title:e("dashboard.sortBy.default")});const d=P(!1),b=qe({isVisible:!1,offset:[0,0]}),U=D({get:()=>f.value,set:gt(i=>{f.value=i},300)}),{paginatedResults:_e,currentPage:O,pageCount:oe}=bt(s,B.paginationSize,$),fe=D(()=>!!f.value&&f.value.length>0),le=D(()=>s.value.length<=y.value.length);function G(i){d.value=i??!d.value,d.value&&Me(()=>{document.getElementById("searchInput")?.focus()})}function be(i){p.toggleSelect(i)}function ge(i){c.value||l.push({name:"torrentDetail",params:{hash:i}})}function ne(){f.value=""}function J(){window.scrollTo({top:0,behavior:"smooth"})}function Q(){c.value&&p.unselectAllTorrents(),c.value=!c.value}function ye(){le.value?p.unselectAllTorrents():p.selectTorrents(...s.value.map(i=>i.hash))}async function se(i,u){i.preventDefault(),b.isVisible&&(b.isVisible=!1,await Me()),b.isVisible=!0,b.offset=[i.pageX,i.pageY],c.value?y.value.length===0&&p.selectTorrent(u.hash):(p.unselectAllTorrents(),p.selectTorrent(u.hash))}at(()=>b.isVisible,i=>{!i&&!c.value&&p.unselectAllTorrents()});function re(i){if(g.hasActiveDialog)return!1;const u=i.target;if(xe(i)&&i.key==="a"&&u.tagName!=="INPUT")return p.unselectAllTorrents(),p.selectTorrents(...s.value.map(v=>v.hash)),i.preventDefault(),!0;if(xe(i)&&i.key==="f"){const v=document.getElementById("searchInput");if(document.activeElement!==v)return G(!0),i.preventDefault(),!0}if(i.key==="Escape"){const v=document.getElementById("searchInput");return document.activeElement===v||d.value?G(!1):(c.value=!1,p.unselectAllTorrents()),i.preventDefault(),!0}if(i.key==="Delete")return y.value.length===0?void 0:(g.createDialog(Qe,{hashes:p.selectedTorrents}),i.preventDefault(),!0)}me(async()=>{await C.fetchCategories(),await C.fetchTags(),G(fe.value)}),Ge(()=>{document.addEventListener("keydown",re),c.value=!1,J()}),ot(()=>{document.removeEventListener("keydown",re)});const ie=P();function ke(i,u){ie.value=setTimeout(()=>{se(i,u)},500)}function T(){clearTimeout(ie.value)}return(i,u)=>(r(),w(Y,null,[h("div",ga,[t(Se,{class:"ma-0 pa-0 mb-2"},{default:o(()=>[t(Ne,null,{default:o(()=>[Te(t(z,{color:"transparent"},{default:o(()=>[t(q,{id:"searchInput",modelValue:U.value,"onUpdate:modelValue":u[0]||(u[0]=v=>U.value=v),label:n(e)("dashboard.searchInputLabel"),clearable:"",density:"compact","hide-details":"","prepend-inner-icon":"mdi-magnify",rounded:"pill","single-line":"",style:{width:"200px"},variant:"solo","onClick:clear":u[1]||(u[1]=v=>ne())},null,8,["modelValue","label"])]),_:1},512),[[Ve,d.value]])]),_:1}),t(K,{text:n(e)("dashboard.toggleSearchFilter"),location:"top"},{activator:o(({props:v})=>[t(A,N({icon:d.value?"mdi-chevron-left-circle":"mdi-text-box-search"},v,{variant:"plain",onClick:u[2]||(u[2]=W=>G())}),null,16,["icon"])]),_:1},8,["text"]),t(K,{text:n(e)("dashboard.toggleSelectMode"),location:"top"},{activator:o(({props:v})=>[t(A,N({icon:n(c)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline"},v,{variant:"plain",onClick:Q}),null,16,["icon"])]),_:1},8,["text"]),t(K,{text:n(e)("dashboard.toggleSortOrder"),location:"top"},{activator:o(({props:v})=>[t(A,N({icon:n(_).reverseOrder?"mdi-arrow-up-thin":"mdi-arrow-down-thin"},v,{variant:"plain",onClick:u[3]||(u[3]=W=>n(_).reverseOrder=!n(_).reverseOrder)}),null,16,["icon"])]),_:1},8,["text"]),h("div",ya,[t(ht,{modelValue:n(_).sortBy,"onUpdate:modelValue":u[4]||(u[4]=v=>n(_).sortBy=v),items:n(k),label:n(e)("dashboard.sortLabel"),"auto-select-first":"",density:"compact","hide-details":"",variant:"solo-filled"},null,8,["modelValue","items","label"])]),t(de,{class:"align-center justify-center"},{default:o(()=>[h("span",ka,m(n(S)),1)]),_:1})]),_:1}),t(Se,{class:"ma-0 pa-0"},{default:o(()=>[t(_t,null,{default:o(()=>[Te(t(z,{color:"transparent"},{default:o(()=>[t(K,{text:n(e)("common.selectAll"),location:"bottom"},{activator:o(({props:v})=>[t(A,N({icon:le.value?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",class:"text-grey",color:"transparent",style:{left:"-8px"}},v,{onClick:ye}),null,16,["icon"])]),_:1},8,["text"]),h("span",Ta,m(n(e)("dashboard.selectAll")),1)]),_:1},512),[[Ve,n(c)]])]),_:1})]),_:1}),n(p).filteredTorrents.length===0?(r(),w("div",Va,[h("p",$a,m(n(e)("common.emptyList")),1)])):(r(),w("div",wa,[t(De,{id:"torrentList",class:"pa-0",color:"transparent"},{default:o(()=>[n(B).isPaginationOnTop&&!n(B).isInfiniteScrollActive?(r(),x(Z,{key:0},{default:o(()=>[t(Oe,{modelValue:n(O),"onUpdate:modelValue":u[5]||(u[5]=v=>ee(O)?O.value=v:null),length:n(oe),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left",onInput:J},null,8,["modelValue","length"])]),_:1})):F("",!0),(r(!0),w(Y,null,te(n(_e),v=>(r(),x(Z,{id:`torrent-${v.hash}`,class:Ke([n(a).mobile?"mb-2":"mb-4","pa-0"]),onContextmenu:W=>se(W,v),onTouchcancel:T,onTouchend:T,onTouchmove:T,onTouchstart:ke,onDblclick:H(W=>ge(v.hash),["prevent"])},{default:o(()=>[h("div",Ba,[t(Ne,null,{default:o(()=>[Te(t(z,{class:"mr-3",color:"transparent"},{default:o(()=>[t(A,{icon:n(p).isTorrentInSelection(v.hash)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",color:"transparent",variant:"flat",onClick:W=>be(v.hash)},null,8,["icon","onClick"])]),_:2},1536),[[Ve,n(p).isSelectionMultiple]])]),_:2},1024),t(na,{torrent:v},null,8,["torrent"])])]),_:2},1032,["id","class","onContextmenu","onDblclick"]))),256)),!n(B).isPaginationOnTop&&!n(B).isInfiniteScrollActive?(r(),x(Z,{key:1},{default:o(()=>[t(Oe,{modelValue:n(O),"onUpdate:modelValue":u[6]||(u[6]=v=>ee(O)?O.value=v:null),length:n(oe),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left",onInput:J},null,8,["modelValue","length"])]),_:1})):F("",!0)]),_:1})]))]),h("div",{style:lt(`position: absolute; left: ${b.offset[0]}px; top: ${b.offset[1]}px;`)},[t(ba,{modelValue:b.isVisible,"onUpdate:modelValue":u[7]||(u[7]=v=>b.isVisible=v)},null,8,["modelValue"])],4)],64))}});export{Pa as default};
