import{d as R}from"./dayjs.min-c6dcb074.js";import{ai as B,aj as K,r as z,s as J,h as X,i as ss,j as ts,t as es,v as H,w as ns,n as is,x as I,k as os,y as rs}from"./index-514c2666.js";import{A as as,r as F,d as us,c as S,C as ds,$ as T,a0 as G,a1 as U,D as b,V as x,Z as A,u as j,Y as ls,a4 as hs,ag as cs,i as ms}from"./vue-aae79161.js";var fs=(n=>(n.ERROR="error",n.MISSING_FILES="missingFiles",n.UPLOADING="uploading",n.PAUSED_UP="pausedUP",n.QUEUED_UP="queuedUP",n.STALLED_UP="stalledUP",n.CHECKING_UP="checkingUP",n.FORCED_UP="forcedUP",n.ALLOCATING="allocating",n.DOWNLOADING="downloading",n.META_DL="metaDL",n.PAUSED_DL="pausedDL",n.QUEUED_DL="queuedDL",n.STALLED_DL="stalledDL",n.CHECKING_DL="checkingDL",n.FORCED_DL="forcedDL",n.CHECKING_RESUME_DATA="checkingResumeData",n.MOVING="moving",n.UNKNOWN="unknown",n))(fs||{}),W={exports:{}};(function(n,N){(function(m,r){n.exports=r()})(B,function(){var m,r,y=1e3,v=6e4,g=36e5,D=864e5,L=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,o=31536e6,h=2628e6,P=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,p={years:o,months:h,days:D,hours:g,minutes:v,seconds:y,milliseconds:1,weeks:6048e5},l=function(e){return e instanceof E},u=function(e,t,s){return new E(e,s,t.$l)},c=function(e){return r.p(e)+"s"},C=function(e){return e<0},M=function(e){return C(e)?Math.ceil(e):Math.floor(e)},_=function(e){return Math.abs(e)},k=function(e,t){return e?C(e)?{negative:!0,format:""+_(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},E=function(){function e(s,i,d){var a=this;if(this.$d={},this.$l=d,s===void 0&&(this.$ms=0,this.parseFromMilliseconds()),i)return u(s*p[c(i)],this);if(typeof s=="number")return this.$ms=s,this.parseFromMilliseconds(),this;if(typeof s=="object")return Object.keys(s).forEach(function(V){a.$d[c(V)]=s[V]}),this.calMilliseconds(),this;if(typeof s=="string"){var f=s.match(P);if(f){var $=f.slice(2).map(function(V){return V!=null?Number(V):0});return this.$d.years=$[0],this.$d.months=$[1],this.$d.weeks=$[2],this.$d.days=$[3],this.$d.hours=$[4],this.$d.minutes=$[5],this.$d.seconds=$[6],this.calMilliseconds(),this}}return this}var t=e.prototype;return t.calMilliseconds=function(){var s=this;this.$ms=Object.keys(this.$d).reduce(function(i,d){return i+(s.$d[d]||0)*p[d]},0)},t.parseFromMilliseconds=function(){var s=this.$ms;this.$d.years=M(s/o),s%=o,this.$d.months=M(s/h),s%=h,this.$d.days=M(s/D),s%=D,this.$d.hours=M(s/g),s%=g,this.$d.minutes=M(s/v),s%=v,this.$d.seconds=M(s/y),s%=y,this.$d.milliseconds=s},t.toISOString=function(){var s=k(this.$d.years,"Y"),i=k(this.$d.months,"M"),d=+this.$d.days||0;this.$d.weeks&&(d+=7*this.$d.weeks);var a=k(d,"D"),f=k(this.$d.hours,"H"),$=k(this.$d.minutes,"M"),V=this.$d.seconds||0;this.$d.milliseconds&&(V+=this.$d.milliseconds/1e3,V=Math.round(1e3*V)/1e3);var O=k(V,"S"),Q=s.negative||i.negative||a.negative||f.negative||$.negative||O.negative,Z=f.format||$.format||O.format?"T":"",Y=(Q?"-":"")+"P"+s.format+i.format+a.format+Z+f.format+$.format+O.format;return Y==="P"||Y==="-P"?"P0D":Y},t.toJSON=function(){return this.toISOString()},t.format=function(s){var i=s||"YYYY-MM-DDTHH:mm:ss",d={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return i.replace(L,function(a,f){return f||String(d[a])})},t.as=function(s){return this.$ms/p[c(s)]},t.get=function(s){var i=this.$ms,d=c(s);return d==="milliseconds"?i%=1e3:i=d==="weeks"?M(i/p[d]):this.$d[d],i||0},t.add=function(s,i,d){var a;return a=i?s*p[c(i)]:l(s)?s.$ms:u(s,this).$ms,u(this.$ms+a*(d?-1:1),this)},t.subtract=function(s,i){return this.add(s,i,!0)},t.locale=function(s){var i=this.clone();return i.$l=s,i},t.clone=function(){return u(this.$ms,this)},t.humanize=function(s){return m().add(this.$ms,"ms").locale(this.$l).fromNow(!s)},t.valueOf=function(){return this.asMilliseconds()},t.milliseconds=function(){return this.get("milliseconds")},t.asMilliseconds=function(){return this.as("milliseconds")},t.seconds=function(){return this.get("seconds")},t.asSeconds=function(){return this.as("seconds")},t.minutes=function(){return this.get("minutes")},t.asMinutes=function(){return this.as("minutes")},t.hours=function(){return this.get("hours")},t.asHours=function(){return this.as("hours")},t.days=function(){return this.get("days")},t.asDays=function(){return this.as("days")},t.weeks=function(){return this.get("weeks")},t.asWeeks=function(){return this.as("weeks")},t.months=function(){return this.get("months")},t.asMonths=function(){return this.as("months")},t.years=function(){return this.get("years")},t.asYears=function(){return this.as("years")},e}(),w=function(e,t,s){return e.add(t.years()*s,"y").add(t.months()*s,"M").add(t.days()*s,"d").add(t.hours()*s,"h").add(t.minutes()*s,"m").add(t.seconds()*s,"s").add(t.milliseconds()*s,"ms")};return function(e,t,s){m=s,r=s().$utils(),s.duration=function(a,f){var $=s.locale();return u(a,{$l:$},f)},s.isDuration=l;var i=t.prototype.add,d=t.prototype.subtract;t.prototype.add=function(a,f){return l(a)?w(this,a,1):i.bind(this)(a,f)},t.prototype.subtract=function(a,f){return l(a)?w(this,a,-1):d.bind(this)(a,f)}}})})(W);var vs=W.exports;const $s=K(vs);var q={exports:{}};(function(n,N){(function(m,r){n.exports=r()})(B,function(){return function(m,r,y){m=m||{};var v=r.prototype,g={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function D(o,h,P,p){return v.fromToBase(o,h,P,p)}y.en.relativeTime=g,v.fromToBase=function(o,h,P,p,l){for(var u,c,C,M=P.$locale().relativeTime||g,_=m.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],k=_.length,E=0;E<k;E+=1){var w=_[E];w.d&&(u=p?y(o).diff(P,w.d,!0):P.diff(o,w.d,!0));var e=(m.rounding||Math.round)(Math.abs(u));if(C=u>0,e<=w.r||!w.r){e<=1&&E>0&&(w=_[E-1]);var t=M[w.l];l&&(e=l(""+e)),c=typeof t=="string"?t.replace("%d",e):t(e,h,w.l,C);break}}if(h)return c;var s=C?M.future:M.past;return typeof s=="function"?s(c):s.replace("%s",c)},v.to=function(o,h){return D(o,h,this,!0)},v.from=function(o,h){return D(o,h,this)};var L=function(o){return o.$u?y.utc():y()};v.toNow=function(o){return this.to(L(this),o)},v.fromNow=function(o){return this.from(L(this),o)}}})})(q);var ps=q.exports;const ys=K(ps);R.extend($s);R.extend(ys);const ws=as({__name:"MoveTorrentDialog",props:{guid:{},hashes:{}},setup(n){const N=n,{isOpened:m}=z(N.guid),{t:r}=J(),y=X(),v=F(),g=F(!1),D=us({newPath:""}),L=[l=>!!l||r("dialogs.moveTorrent.required"),l=>l!==h.value||r("dialogs.moveTorrent.samePath")],o=S(()=>N.hashes.map(y.getTorrentByHash)),h=S(()=>o.value[0]?.savePath);async function P(){await v.value?.validate(),g.value&&(await y.moveTorrents(N.hashes,D.newPath),p())}const p=()=>{m.value=!1};return ds(()=>{D.newPath=o.value[0]?.savePath||""}),(l,u)=>(T(),G(rs,{modelValue:j(m),"onUpdate:modelValue":u[3]||(u[3]=c=>ms(m)?m.value=c:null)},{default:U(()=>[b(os,null,{default:U(()=>[b(ss,null,{default:U(()=>[x(A(l.$t("dialogs.moveTorrent.title")),1)]),_:1}),b(ts,null,{default:U(()=>[b(j(es),{modelValue:g.value,"onUpdate:modelValue":u[1]||(u[1]=c=>g.value=c),ref_key:"form",ref:v,onSubmit:u[2]||(u[2]=ls(()=>{},["prevent"]))},{default:U(()=>[h.value?(T(),G(H,{key:0,"model-value":h.value,disabled:"",label:l.$t("dialogs.moveTorrent.oldPath")},null,8,["model-value","label"])):hs("",!0),b(H,{modelValue:D.newPath,"onUpdate:modelValue":u[0]||(u[0]=c=>D.newPath=c),rules:L,autofocus:"",label:l.$t("dialogs.moveTorrent.newPath"),onKeydown:cs(P,["enter"])},null,8,["modelValue","label","onKeydown"])]),_:1},8,["modelValue"])]),_:1}),b(ns,null,{default:U(()=>[b(is),b(I,{color:"error",onClick:p},{default:U(()=>[x(A(l.$t("common.cancel")),1)]),_:1}),b(I,{color:"accent",disabled:!g.value,onClick:P},{default:U(()=>[x(A(l.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});export{fs as T,ws as _};
