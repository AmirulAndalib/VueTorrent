import{u as q,n as H,o as W,L as s,p as J,q as b,r as K,T as Q,s as g,k as X,t as m,v as Y,w as Z,x as c,a as ee,y as I,z as te,A as le,B as ae,j as se,C as ne,D as oe}from"./index-5txT7laq.js";import{h as ue,P as re,Q as ie,c as L,d as de,H as me,R as ce,B as r,N as T,m as e,G as t,S as f,J as i,u as n,O as v,D as y,M as V,F as R,T as pe,U as A,I as F}from"./vue-BnX0oIJJ.js";import{u as ge}from"./vuetify-Dz-z3L3o.js";const fe={class:"pa-3"},ve={style:{"font-size":"1.6em !important"},class:"subtitle-1 ml-2"},ye={class:"d-flex justify-end"},Ve={class:"d-flex mr-8 overflow-hidden"},he={class:"d-flex"},Ce=ue({__name:"Logs",setup(_e){const B=re(),{t:E}=q(),{current:P}=ge(),h=H(),{filteredLogs:U,logTypeFilter:u,logMessageFilter:_,paginatedResults:O,currentPage:d,pageCount:p}=ie(h),M=W(),$=L(()=>({light:{normal:"black",info:"blue",warning:"orange",critical:"red"},dark:{normal:"white",info:"deepskyblue",warning:"darkorange",critical:new Q("darkred").lighten(12).toString()}})),k=de([{title:s[s.NORMAL],value:s.NORMAL},{title:s[s.INFO],value:s.INFO},{title:s[s.WARNING],value:s.WARNING},{title:s[s.CRITICAL],value:s.CRITICAL}]),C=L(()=>u.value.length>0),w=L(()=>u.value.length===k.value.length),x=()=>{B.push({name:"dashboard"})},N=a=>`color: ${$.value[P.value.dark?"dark":"light"][s[a.type].toLowerCase()]}`,j=a=>s[a.type],D=a=>oe(a.timestamp*1e3).format(M.dateFormat),z=()=>{w.value?u.value=[]:u.value=k.value.map(a=>a.value)},S=a=>{a.key==="Escape"&&x()};return me(async()=>{document.addEventListener("keydown",S),await h.cleanAndFetchLogs(),J(h.updateLogs,15e3)}),ce(()=>{document.removeEventListener("keydown",S)}),(a,o)=>(r(),T("div",fe,[e(b,{"no-gutters":"",align:"center",justify:"center"},{default:t(()=>[e(g,null,{default:t(()=>[f("h1",ve,i(n(E)("logs.title")),1)]),_:1}),e(g,null,{default:t(()=>[f("div",ye,[e(X,{icon:"mdi-close",variant:"plain",onClick:x})])]),_:1})]),_:1}),e(K,null,{default:t(()=>[e(m,null,{default:t(()=>[e(b,null,{default:t(()=>[e(g,{cols:"6"},{default:t(()=>[e(Y,{modelValue:n(u),"onUpdate:modelValue":o[0]||(o[0]=l=>v(u)?u.value=l:null),items:k.value,label:a.$t("logs.filters.type"),"hide-details":"",multiple:"",chips:""},{"prepend-item":t(()=>[e(m,{title:a.$t("common.selectAll"),onClick:z},{prepend:t(()=>[e(Z,{indeterminate:C.value&&!w.value,"model-value":C.value},null,8,["indeterminate","model-value"])]),_:1},8,["title"]),e(c)]),_:1},8,["modelValue","items","label"])]),_:1}),e(g,{cols:"6"},{default:t(()=>[e(ee,{modelValue:n(_),"onUpdate:modelValue":o[1]||(o[1]=l=>v(_)?_.value=l:null),label:a.$t("logs.filters.query"),"hide-details":"",clearable:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),e(c,{class:"my-3",thickness:"5"}),n(p)>1?(r(),y(m,{key:0},{default:t(()=>[e(I,{modelValue:n(d),"onUpdate:modelValue":o[2]||(o[2]=l=>v(d)?d.value=l:null),length:n(p),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):V("",!0),e(c),(r(!0),T(R,null,pe(n(O),(l,G)=>(r(),T(R,null,[G>0?(r(),y(c,{key:0})):V("",!0),e(m,{class:"pa-0"},{default:t(()=>[e(te,{class:"p-0"},{default:t(()=>[e(le,{class:"pa-0"},{default:t(()=>[e(ae,{class:"text-no-wrap",style:A(N(l))},{default:t(()=>[f("div",Ve,"["+i(l.id)+"] "+i(l.message),1),e(se),f("div",he,i(D(l)),1)]),_:2},1032,["style"]),e(ne,{class:"wrap-word text-select",style:A(N(l))},{default:t(()=>[F(" ["+i(j(l))+"] "+i(l.message),1)]),_:2},1032,["style"])]),_:2},1024)]),_:2},1024)]),_:2},1024)],64))),256)),n(U).length===0?(r(),y(m,{key:1},{default:t(()=>[F(i(a.$t("logs.emptyLogList")),1)]),_:1})):V("",!0),e(c),n(p)>1?(r(),y(m,{key:2},{default:t(()=>[e(I,{modelValue:n(d),"onUpdate:modelValue":o[3]||(o[3]=l=>v(d)?d.value=l:null),length:n(p),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):V("",!0)]),_:1})]))}});export{Ce as default};
