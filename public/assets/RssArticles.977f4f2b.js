import{ae as l,bt as c,ag as u,r as d,Q as m,s as _,A as n,B as o,E as f,x as p,y as r,a as y}from"./index.fae0384d.js";import{d as v,a as h}from"./vue.ea0348c7.js";import{_ as g}from"./VDataTable.166eeb80.js";const x=v({name:"RssArticles",mixins:[l],data(){return{headers:[{text:this.$t("modals.rss.columnTitle.id"),value:"id"},{text:this.$t("modals.rss.columnTitle.title"),value:"title"},{text:this.$t("modals.rss.columnTitle.category"),value:"category"},{text:this.$t("modals.rss.columnTitle.author"),value:"author"},{text:this.$t("modals.rss.columnTitle.date"),value:"parsedDate"},{text:this.$t("modals.rss.columnTitle.feedName"),value:"feedName"},{text:this.$t("modals.rss.columnTitle.actions"),value:"actions",sortable:!1}],filter:"",sortBy:"parsedDate",reverse:!0,mdiEmailOpen:c,mdiDownload:u,mdiClose:d}},mounted(){document.addEventListener("keydown",this.handleKeyboardShortcut)},created(){this.$store.commit("FETCH_FEEDS")},beforeDestroy(){document.removeEventListener("keydown",this.handleKeyboardShortcut)},computed:{...h(["rss"]),articles(){const a=[];return this.rss.feeds.forEach(t=>{t.articles&&a.push(...t.articles.map(e=>({feedName:t.name,parsedDate:new Date(e.date),...e})))}),a}},methods:{close(){this.$router.back()},customFilter(a,t,e){return e.title.toLowerCase().indexOf(t.toLowerCase())!==-1},getRowStyle(a){return a.isRead?"rss-read":"rss-unread"},downloadTorrent(a){this.createModal("AddModal",{initialMagnet:a.torrentURL})},async markAsRead(a){await m.markAsRead(a.feedName,a.id),this.$store.commit("FETCH_FEEDS")},handleKeyboardShortcut(a){a.key==="Escape"&&this.close()}}});var k=function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"px-1 px-sm-5 background noselect"},[e(n,{staticClass:"grey--text",attrs:{"no-gutters":"",align:"center",justify:"center"}},[e(o,[e("h1",{staticClass:"subtitle-1 ml-2",staticStyle:{"font-size":"1.6em !important"}},[t._v(" "+t._s(t.$t("modals.rss.title"))+" ")])]),e(o,{staticClass:"align-center justify-center"},[e(f,{staticClass:"justify-end"},[e(p,{attrs:{small:"",elevation:"0"},on:{click:t.close}},[e(r,[t._v(t._s(t.mdiClose))])],1)],1)],1)],1),e(n,{staticClass:"ma-0 pa-0"},[e(g,{attrs:{id:"articlesTable",headers:t.headers,items:t.articles,"items-per-page":15,search:t.filter,"custom-filter":t.customFilter,"sort-by":t.sortBy,"sort-desc":t.reverse,"item-class":t.getRowStyle},on:{"update:sortBy":function(s){t.sortBy=s},"update:sort-by":function(s){t.sortBy=s},"update:sortDesc":function(s){t.reverse=s},"update:sort-desc":function(s){t.reverse=s}},scopedSlots:t._u([{key:"top",fn:function(){return[e(y,{ref:"filterRef",staticClass:"mx-4",attrs:{label:"Filter"},model:{value:t.filter,callback:function(s){t.filter=s},expression:"filter"}})]},proxy:!0},{key:"item.title",fn:function({item:s}){return[e("a",{attrs:{href:s.link,target:"_blank"},domProps:{textContent:t._s(s.title)}})]}},{key:"item.parsedDate",fn:function({item:s}){return[t._v(" "+t._s(s.parsedDate.toLocaleString())+" ")]}},{key:"item.actions",fn:function({item:s}){return[e("span",{staticClass:"rss-actions"},[e(r,{on:{click:function(i){return t.markAsRead(s)}}},[t._v(t._s(t.mdiEmailOpen))]),e(r,{on:{click:function(i){return t.downloadTorrent(s)}}},[t._v(t._s(t.mdiDownload))])],1)]}}],null,!0)})],1)],1)},C=[],b=_(x,k,C,!1,null,"421f2f9e",null,null);const w=b.exports;export{w as default};
