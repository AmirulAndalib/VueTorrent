import{A as B,$ as s,a2 as b,a7 as p,Z as u,V as x,c as w,a0 as T,a1 as o,F as K,a3 as X,u as n,D as a,R as je,I as R,a5 as Ae,ab as Ye,a4 as N,ac as Ee,ad as Me,r as F,d as Re,C as be,h as Le,Y as j,ag as ge,i as ne,_ as Ne,ah as Xe,ai as Je,w as Qe,J as We,aj as Ze,q as Be,O as ve,Q as _e}from"./vue-aae79161.js";import{V as Se,_ as ke,u as J,f as et,a as tt,T as E,b as at,c as ot,d as lt,e as nt,g as re,h as Q,i as Ue,j as Te,k as H,l as ye,D as M,m as fe,n as $e,o as Fe,p as we,q as Y,r as Oe,s as Ve,t as He,v as se,w as Ke,x as I,y as ze,z as qe,A as rt,B as U,C as Ge,E as st,F as it,G as Ce,H as De,I as dt,J as ct,K as ut,L as Ie}from"./index-89698a51.js";import{_ as pt}from"./MoveTorrentDialog.vue_vue_type_script_setup_true_lang-9a4e039e.js";import{d as xe}from"./dayjs.min-af9cb575.js";import{u as mt}from"./ArrayPagination-bfaa9982.js";import{d as ht}from"./index-cf528db6.js";const vt={class:"d-flex flex-column"},_t={class:"text-caption text-grey"},ft={class:"text-caption text-grey"},gt=B({__name:"ItemAmount",props:{torrent:{},title:{},value:{},total:{}},setup(g){return(e,l)=>(s(),b("div",vt,[p("div",_t,u(e.$t(`torrent.properties.${e.title}`)),1),p("div",null,[x(u(e.torrent[e.value])+" ",1),p("span",ft," / "+u(e.torrent[e.total]),1)])]))}}),yt={class:"d-flex flex-column"},bt={class:"text-caption text-grey"},kt={class:"d-flex flex-row gap"},Tt=B({__name:"ItemChip",props:{torrent:{},title:{},value:{},color:{}},setup(g){const e=g,l=w(()=>{const t=e.torrent[e.value],m=typeof t;if(m==="string")return t.length>0?[t]:[];if(m==="object")return t});return(t,m)=>(s(),b("div",yt,[p("div",bt,u(t.$t(`torrent.properties.${t.title}`)),1),p("div",kt,[!l.value||l.value.length<1?(s(),T(Se,{key:0,color:t.color.replace("$1",t.torrent[t.value]),variant:"flat"},{default:o(()=>[x(u(t.$t(`torrent.properties.empty_${t.value}`)),1)]),_:1},8,["color"])):(s(!0),b(K,{key:1},X(l.value,y=>(s(),T(Se,{color:t.color.replace("$1",t.torrent.state),variant:"flat"},{default:o(()=>[x(u(y),1)]),_:2},1032,["color"]))),256))])]))}});const $t=ke(Tt,[["__scopeId","data-v-8eb4906a"]]),wt={class:"d-flex flex-column"},Vt={class:"text-caption text-grey"},xt={class:"text-caption text-grey"},Bt=B({__name:"ItemData",props:{torrent:{},title:{},value:{}},setup(g){const e=J();return(l,t)=>(s(),b("div",wt,[p("div",Vt,u(l.$t(`torrent.properties.${l.title}`)),1),p("div",null,[x(u(n(et)(l.torrent[l.value],n(e).useBinarySize))+" ",1),p("span",xt,u(n(tt)(l.torrent[l.value],n(e).useBinarySize)),1)])]))}}),St={class:"d-flex flex-column"},Ct={class:"text-caption text-grey"},Dt={key:0},It={key:1},Pt=B({__name:"ItemDateTime",props:{torrent:{},title:{},value:{}},setup(g){const e=J();return(l,t)=>(s(),b("div",St,[p("div",Ct,u(l.$t(`torrent.properties.${l.title}`)),1),p("div",null,[l.torrent[l.value]>0?(s(),b("span",Dt,u(n(xe)(l.torrent[l.value]*1e3).format(n(e).dateFormat??"DD/MM/YYYY, HH:mm:ss")),1)):(s(),b("span",It,u(l.$t("dashboard.not_complete")),1))])]))}}),At={class:"d-flex flex-column"},Et={class:"text-caption text-grey"},Mt={key:0},Rt={key:1},Lt="D[d] H[h] m[m] s[s]",Nt=B({__name:"ItemDuration",props:{torrent:{},title:{},value:{}},setup(g){return(e,l)=>(s(),b("div",At,[p("div",Et,u(e.$t(`torrent.properties.${e.title}`)),1),p("div",null,[e.torrent[e.value]>0?(s(),b("span",Mt,u(n(xe).duration(e.torrent[e.value],"seconds").format(Lt)),1)):(s(),b("span",Rt,u(e.$t("dashboard.not_complete")),1))])]))}}),Ut={class:"d-flex flex-column"},Ft={class:"text-caption text-grey"},Ot=B({__name:"ItemPercent",props:{torrent:{},title:{},value:{}},setup(g){const e=g,l=w(()=>[E.UPLOADING,E.CHECKING_UP,E.FORCED_UP,E.ALLOCATING,E.DOWNLOADING,E.META_DL,E.CHECKING_DL,E.FORCED_DL,E.CHECKING_RESUME_DATA,E.MOVING].includes(e.torrent.state));return(t,m)=>(s(),b("div",Ut,[p("div",Ft,u(t.$t(`torrent.properties.${t.title}`)),1),a(ot,{"model-value":t.torrent[t.value],max:1,striped:l.value,height:20,color:`torrent-${t.torrent.state}`,rounded:"sm",style:{width:"10em"}},{default:o(()=>[x(u(n(at)(t.torrent[t.value])),1)]),_:1},8,["model-value","striped","color"])]))}}),Ht={class:"d-flex flex-column"},Kt={class:"text-caption text-grey"},zt=B({__name:"ItemRelativeTime",props:{torrent:{},title:{},value:{}},setup(g){return(e,l)=>(s(),b("div",Ht,[p("div",Kt,u(e.$t(`torrent.properties.${e.title}`)),1),p("div",null,[p("span",null,u(n(xe)(e.torrent[e.value]*1e3).fromNow()),1)])]))}}),qt={class:"d-flex flex-column"},Gt={class:"text-caption text-grey"},jt={class:"text-caption text-grey"},Yt=B({__name:"ItemSpeed",props:{torrent:{},title:{},value:{}},setup(g){const e=J();return(l,t)=>(s(),b("div",qt,[p("div",Gt,u(l.$t(`torrent.properties.${l.title}`)),1),p("div",null,[x(u(n(lt)(l.torrent[l.value],n(e).useBitSpeed))+" ",1),p("span",jt,u(n(nt)(l.torrent[l.value],n(e).useBitSpeed)),1)])]))}}),Xt={class:"d-flex flex-column"},Jt={class:"text-caption text-grey"},Qt=B({__name:"ItemText",props:{torrent:{},title:{},value:{}},setup(g){return(e,l)=>(s(),b("div",Xt,[p("div",Jt,u(e.$t(`torrent.properties.${e.title}`)),1),p("div",null,u(e.torrent[e.value]),1)]))}}),Wt={class:"d-flex gap flex-wrap"},Zt=B({__name:"Torrent",props:{torrent:{}},setup(g){const e=g,l=re(),t=Q(),m=J(),y=w(()=>(e.torrent.progress===1?m.doneTorrentProperties:m.busyTorrentProperties).filter(k=>k.active).sort((k,v)=>k.order-v.order));function V(_){_.shiftKey?l.spanTorrentSelection(t.getTorrentIndexByHash(e.torrent.hash)):(ye(_)||l.isSelectionMultiple)&&(l.isSelectionMultiple=!0,l.toggleSelect(e.torrent.hash))}const d=_=>{switch(_){case M.AMOUNT:return gt;case M.CHIP:return $t;case M.DATA:return Bt;case M.DATETIME:return Pt;case M.DURATION:return Nt;case M.PERCENT:return Ot;case M.RELATIVE:return zt;case M.SPEED:return Yt;case M.TEXT:default:return Qt}},h=w(()=>l.isTorrentInSelection(e.torrent.hash));return(_,k)=>(s(),T(H,{class:Ae(`sideborder ${_.torrent.state} pointer`),color:h.value?`torrent-${_.torrent.state}-darken-3`:void 0,width:"100%",onClick:V},{default:o(()=>[a(Ue,{class:"font-weight-bold"},{default:o(()=>[x(u(_.torrent.name),1)]),_:1}),a(Te,null,{default:o(()=>[p("div",Wt,[(s(!0),b(K,null,X(y.value,v=>(s(),T(je(d(v.type)),R({torrent:_.torrent},v.props),null,16,["torrent"]))),256))])]),_:1})]),_:1},8,["class","color"]))}});const ea=ke(Zt,[["__scopeId","data-v-4ac323c1"]]),ta={class:"d-flex"},aa={key:2},oa={key:3},la=B({__name:"RightClickMenuEntry",props:{text:{},icon:{},action:{type:Function},hidden:{type:Boolean},disabled:{type:Boolean},disabledText:{},disabledIcon:{},divider:{type:Boolean},children:{}},setup(g){return(e,l)=>{const t=Ye("RightClickMenuEntry",!0);return e.hidden?N("",!0):(s(),T(Y,{key:0,class:"px-3 pointer",disabled:e.disabled,onClick:e.action},{default:o(()=>[p("div",ta,[e.disabled&&e.disabledIcon?(s(),T(fe,{key:0,class:"mr-2"},{default:o(()=>[x(u(e.disabledIcon),1)]),_:1})):e.icon?(s(),T(fe,{key:1,class:"mr-2"},{default:o(()=>[x(u(e.icon),1)]),_:1})):N("",!0),e.disabled&&e.disabledText?(s(),b("span",aa,u(e.disabledText),1)):(s(),b("span",oa,u(e.text),1)),a($e),e.children?(s(),T(fe,{key:4},{default:o(()=>[x("mdi-chevron-right")]),_:1})):N("",!0)]),e.children?(s(),T(Fe,{key:0,activator:"parent","open-on-hover":!0,"open-on-click":!0,"close-delay":"0","open-delay":"0",location:"right"},{default:o(()=>[a(we,null,{default:o(()=>[(s(!0),b(K,null,X(e.children,m=>(s(),T(t,Ee(Me(m)),null,16))),256))]),_:1})]),_:1})):N("",!0)]),_:1},8,["disabled","onClick"]))}}}),na=B({__name:"RenameTorrentDialog",props:{guid:{},hash:{}},setup(g){const e=g,{isOpened:l}=Oe(e.guid),{t}=Ve(),m=Q(),y=F(),V=F(),d=F(!1),h=Re({newName:""}),_=[$=>!!$||t("dialogs.renameTorrent.required"),$=>$!==v.value||t("dialogs.renameTorrent.sameName")],k=w(()=>m.getTorrentByHash(e.hash)),v=w(()=>k.value?.name);async function A(){await V.value?.validate(),d.value&&(await m.renameTorrent(e.hash,h.newName),S())}const S=()=>{l.value=!1};return be(()=>{h.newName=k.value?.name||""}),Le(()=>{y.value?.select()}),($,D)=>(s(),T(ze,{modelValue:n(l),"onUpdate:modelValue":D[3]||(D[3]=C=>ne(l)?l.value=C:null)},{default:o(()=>[a(H,null,{default:o(()=>[a(Ue,null,{default:o(()=>[x(u($.$t("dialogs.renameTorrent.title")),1)]),_:1}),a(Te,null,{default:o(()=>[a(n(He),{modelValue:d.value,"onUpdate:modelValue":D[1]||(D[1]=C=>d.value=C),ref_key:"form",ref:V,onSubmit:D[2]||(D[2]=j(()=>{},["prevent"]))},{default:o(()=>[v.value?(s(),T(se,{key:0,"model-value":v.value,disabled:"",label:$.$t("dialogs.renameTorrent.oldName")},null,8,["model-value","label"])):N("",!0),a(se,{modelValue:h.newName,"onUpdate:modelValue":D[0]||(D[0]=C=>h.newName=C),ref_key:"field",ref:y,rules:_,autofocus:"",label:$.$t("dialogs.renameTorrent.newName"),onKeydown:ge(A,["enter"])},null,8,["modelValue","label","onKeydown"])]),_:1},8,["modelValue"])]),_:1}),a(Ke,null,{default:o(()=>[a($e),a(I,{color:"error",onClick:S},{default:o(()=>[x(u($.$t("common.cancel")),1)]),_:1}),a(I,{color:"accent",disabled:!d.value,onClick:A},{default:o(()=>[x(u($.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Pe=B({__name:"SpeedLimitDialog",props:{guid:{},hash:{},mode:{}},setup(g){const e=g,{isOpened:l}=Oe(e.guid),t=Q(),m=F(!1),y=F(0);function V(){l.value=!1}async function d(){const h=Math.max(0,y.value)*1e3;switch(e.mode){case"download":await t.setDownloadLimit(h,[e.hash]);break;case"upload":await t.setUploadLimit(h,[e.hash]);break}V()}return be(async()=>{const h=t.getTorrentByHash(e.hash);if(!h)return V();switch(e.mode){case"download":y.value=Math.max(0,Math.round(h.dl_limit/1e3));break;case"upload":y.value=Math.max(0,Math.round(h.up_limit/1e3));break}}),(h,_)=>(s(),T(ze,{modelValue:n(l),"onUpdate:modelValue":_[3]||(_[3]=k=>ne(l)?l.value=k:null)},{default:o(()=>[a(H,{title:h.$t(`dialogs.speed_limit.${h.mode}`)},{default:o(()=>[a(Te,null,{default:o(()=>[a(He,{modelValue:m.value,"onUpdate:modelValue":_[1]||(_[1]=k=>m.value=k),onSubmit:_[2]||(_[2]=j(()=>{},["prevent"])),onKeydown:ge(j(d,["prevent"]),["enter"])},{default:o(()=>[a(se,{modelValue:y.value,"onUpdate:modelValue":_[0]||(_[0]=k=>y.value=k),type:"number",autofocus:"",clearable:"",label:h.$t("dialogs.speed_limit.label"),"prepend-inner-icon":"mdi-speedometer",suffix:"kB/s",onKeydown:ge(j(d,["prevent"]),["enter"])},null,8,["modelValue","label","onKeydown"])]),_:1},8,["modelValue","onKeydown"])]),_:1}),a(Ke,null,{default:o(()=>[a($e),a(I,{color:"error",onClick:V},{default:o(()=>[x(u(h.$t("common.cancel")),1)]),_:1}),a(I,{color:"accent",disabled:!m.value,onClick:d},{default:o(()=>[x(u(h.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]))}}),ie=g=>(Xe("data-v-8cd29428"),g=g(),Je(),g),ra={class:"d-flex justify-space-around"},sa=ie(()=>p("span",null,"Resume",-1)),ia=ie(()=>p("span",null,"Force Resume",-1)),da=ie(()=>p("span",null,"Pause",-1)),ca=ie(()=>p("span",null,"Delete",-1)),ua=B({__name:"RightClickMenu",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(g,{emit:e}){const l=g,{t}=Ve(),m=Ne(),y=re(),V=qe(),d=Q(),h=rt(),_=w({get:()=>l.modelValue,set:f=>e("update:modelValue",f)}),k=w(()=>y.selectedTorrents.length>1),v=w(()=>y.selectedTorrents),A=w(()=>v.value[0]),S=w(()=>d.getTorrentByHash(A.value)),$=w(()=>y.selectedTorrents.map(d.getTorrentByHash).filter(f=>!!f)),D=w(()=>[{name:""},...d.categories]);async function C(){await d.resumeTorrents(v)}async function P(){await d.forceResumeTorrents(v)}async function W(){await d.pauseTorrents(v)}function de(){V.createDialog(Ge,{hashes:[...y.selectedTorrents]})}function L(){V.createDialog(pt,{hashes:[...y.selectedTorrents]})}function Z(){V.createDialog(na,{hash:y.selectedTorrents[0]})}async function ce(){await d.recheckTorrents(v)}async function ee(){await d.reannounceTorrents(v)}async function O(){await d.toggleSeqDl(v)}async function ue(){await d.toggleFLPiecePrio(v)}async function pe(){await d.toggleAutoTmm(v,!S.value?.auto_tmm)}function te(f){return $.value.every(r=>r&&r.tags&&r.tags.includes(f))}async function z(f){te(f)?await d.removeTorrentTags(v.value,[f]):await d.addTorrentTags(v.value,[f])}async function q(f){await navigator.clipboard.writeText(f)}function me(){V.createDialog(Pe,{hash:A.value,mode:"download"})}function ae(){V.createDialog(Pe,{hash:A.value,mode:"upload"})}function oe(){}async function le(){v.value.forEach(f=>{d.exportTorrent(f).then(r=>{const i=window.URL.createObjectURL(r),c=document.createElement("a");c.href=i,c.style.opacity="0",c.setAttribute("download",`${f}.torrent`),document.body.appendChild(c),c.click(),document.body.removeChild(c)})})}const he=w(()=>[{text:t("dashboard.right_click.advanced.title"),icon:"mdi-head-cog",children:[{text:t("dashboard.right_click.advanced.change_location"),icon:"mdi-folder",action:L},{text:t("dashboard.right_click.advanced.rename"),icon:"mdi-rename-box",hidden:k.value,action:Z},{text:t("dashboard.right_click.advanced.recheck"),icon:"mdi-playlist-check",action:ce},{text:t("dashboard.right_click.advanced.reannounce"),icon:"mdi-bullhorn",action:ee},{text:t("dashboard.right_click.advanced.seq_dl"),icon:S.value?.seq_dl?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:O},{text:t("dashboard.right_click.advanced.f_l_prio"),icon:S.value?.f_l_piece_prio?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:ue},{text:t("dashboard.right_click.advanced.auto_tmm"),icon:S.value?.auto_tmm?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:pe}]},{text:t("dashboard.right_click.priority.title"),icon:"mdi-priority-high",hidden:!h.preferences.queueing_enabled,children:[{text:t("dashboard.right_click.priority.top"),icon:"mdi-priority-high",action:async()=>await d.setTorrentPriority(v.value,"topPrio")},{text:t("dashboard.right_click.priority.increase"),icon:"mdi-arrow-up",action:async()=>await d.setTorrentPriority(v.value,"increasePrio")},{text:t("dashboard.right_click.priority.decrease"),icon:"mdi-arrow-down",action:async()=>await d.setTorrentPriority(v.value,"decreasePrio")},{text:t("dashboard.right_click.priority.bottom"),icon:"mdi-priority-low",action:async()=>await d.setTorrentPriority(v.value,"bottomPrio")}]},{text:t("dashboard.right_click.tags.title"),icon:"mdi-tag",disabled:d.tags.length===0,disabledText:t("dashboard.right_click.tags.disabled_title"),disabledIcon:"mdi-tag-off",children:d.tags.map(f=>({text:f,icon:te(f)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:async()=>await z(f)}))},{text:t("dashboard.right_click.category.title"),icon:"mdi-label",disabled:d.categories.length===0,disabledText:t("dashboard.right_click.category.disabled_title"),disabledIcon:"mdi-label-off",children:D.value.map(f=>({text:f.name===""?t("dashboard.right_click.category.clear"):f.name,action:async()=>await d.setTorrentCategory(v.value,f.name)}))},{text:t("dashboard.right_click.speed_limit.title"),icon:"mdi-speedometer-slow",children:[{text:t("dashboard.right_click.speed_limit.download"),icon:"mdi-download",action:me},{text:t("dashboard.right_click.speed_limit.upload"),icon:"mdi-upload",action:ae},{text:t("dashboard.right_click.speed_limit.share"),icon:"mdi-account-group",hidden:!0,action:oe}]},{text:t("dashboard.right_click.copy.title"),icon:"mdi-content-copy",hidden:k.value,children:[{text:t("dashboard.right_click.copy.name"),icon:"mdi-alphabetical-variant",action:async()=>S.value&&await q(S.value.name)},{text:t("dashboard.right_click.copy.hash"),icon:"mdi-pound",action:async()=>await q(A.value)},{text:t("dashboard.right_click.copy.magnet"),icon:"mdi-magnet",action:async()=>S.value&&await q(S.value.magnet)}]},{text:t("dashboard.right_click.export",y.selectedTorrents.length),icon:k.value?"mdi-download-multiple":"mdi-download",action:le},{text:t("dashboard.right_click.info"),icon:"mdi-information",hidden:k.value,action:()=>m.push({name:"torrentDetail",params:{hash:A.value}})}]);return(f,r)=>_.value?(s(),T(Fe,{key:0,modelValue:_.value,"onUpdate:modelValue":r[0]||(r[0]=i=>_.value=i),activator:"parent","close-on-content-click":!0,transition:"slide-y-transition","scroll-strategy":"none"},{default:o(()=>[a(we,null,{default:o(()=>[a(Y,null,{default:o(()=>[p("div",ra,[a(U,{location:"top"},{activator:o(({props:i})=>[a(I,R({density:"compact",variant:"plain",icon:"mdi-play"},i,{onClick:C}),null,16)]),default:o(()=>[sa]),_:1}),a(U,{location:"top"},{activator:o(({props:i})=>[a(I,R({density:"compact",variant:"plain",icon:"mdi-fast-forward"},i,{onClick:P}),null,16)]),default:o(()=>[ia]),_:1}),a(U,{location:"top"},{activator:o(({props:i})=>[a(I,R({density:"compact",variant:"plain",icon:"mdi-pause"},i,{onClick:W}),null,16)]),default:o(()=>[da]),_:1}),a(U,{location:"top"},{activator:o(({props:i})=>[a(I,R({color:"red",density:"compact",variant:"plain",icon:"mdi-delete-forever"},i,{onClick:de}),null,16)]),default:o(()=>[ca]),_:1})])]),_:1}),(s(!0),b(K,null,X(he.value,i=>(s(),T(la,Ee(Me(i)),null,16))),256))]),_:1})]),_:1},8,["modelValue"])):N("",!0)}});const pa=ke(ua,[["__scopeId","data-v-8cd29428"]]),ma={class:"pt-4 px-1 px-sm-5"},ha={class:"pa-0",style:{width:"10em"}},va={class:"text-uppercase",style:{float:"right","font-size":"0.8em"}},_a={class:"text-grey"},fa={key:0,class:"mt-5 text-xs-center"},ga={class:"text-grey"},ya={key:1},ba={class:"d-flex align-center"},Ba=B({__name:"Dashboard",setup(g){const{t:e}=Ve(),l=Ne(),t=st(),m=re(),y=qe(),{currentPage:V,filteredTorrents:d,isSelectionMultiple:h,searchFilter:_,selectedTorrents:k,sortOptions:v,torrentCountString:A}=it(re()),S=Q(),$=J(),D=[{value:"added_on",title:e("dashboard.sortBy.added_on")},{value:"amount_left",title:e("dashboard.sortBy.amount_left")},{value:"auto_tmm",title:e("dashboard.sortBy.auto_tmm")},{value:"availability",title:e("dashboard.sortBy.availability")},{value:"avg_download_speed",title:e("dashboard.sortBy.avg_download_speed")},{value:"avg_upload_speed",title:e("dashboard.sortBy.avg_upload_speed")},{value:"category",title:e("dashboard.sortBy.category")},{value:"completed",title:e("dashboard.sortBy.completed")},{value:"completion_on",title:e("dashboard.sortBy.completion_on")},{value:"content_path",title:e("dashboard.sortBy.content_path")},{value:"dl_limit",title:e("dashboard.sortBy.dl_limit")},{value:"dlspeed",title:e("dashboard.sortBy.dlspeed")},{value:"download_path",title:e("dashboard.sortBy.download_path")},{value:"downloaded",title:e("dashboard.sortBy.downloaded")},{value:"downloaded_session",title:e("dashboard.sortBy.downloaded_session")},{value:"eta",title:e("dashboard.sortBy.eta")},{value:"f_l_piece_prio",title:e("dashboard.sortBy.f_l_piece_prio")},{value:"force_start",title:e("dashboard.sortBy.force_start")},{value:"globalSpeed",title:e("dashboard.sortBy.globalSpeed")},{value:"globalVolume",title:e("dashboard.sortBy.globalVolume")},{value:"hash",title:e("dashboard.sortBy.hash")},{value:"infohash_v1",title:e("dashboard.sortBy.infohash_v1")},{value:"infohash_v2",title:e("dashboard.sortBy.infohash_v2")},{value:"last_activity",title:e("dashboard.sortBy.last_activity")},{value:"magnet_uri",title:e("dashboard.sortBy.magnet_uri")},{value:"max_ratio",title:e("dashboard.sortBy.max_ratio")},{value:"max_seeding_time",title:e("dashboard.sortBy.max_seeding_time")},{value:"name",title:e("dashboard.sortBy.name")},{value:"num_complete",title:e("dashboard.sortBy.num_complete")},{value:"num_incomplete",title:e("dashboard.sortBy.num_incomplete")},{value:"num_leechs",title:e("dashboard.sortBy.num_leechs")},{value:"num_seeds",title:e("dashboard.sortBy.num_seeds")},{value:"priority",title:e("dashboard.sortBy.priority")},{value:"progress",title:e("dashboard.sortBy.progress")},{value:"ratio",title:e("dashboard.sortBy.ratio")},{value:"ratio_limit",title:e("dashboard.sortBy.ratio_limit")},{value:"save_path",title:e("dashboard.sortBy.save_path")},{value:"seeding_time",title:e("dashboard.sortBy.seeding_time")},{value:"seeding_time_limit",title:e("dashboard.sortBy.seeding_time_limit")},{value:"seen_complete",title:e("dashboard.sortBy.seen_complete")},{value:"seq_dl",title:e("dashboard.sortBy.seq_dl")},{value:"size",title:e("dashboard.sortBy.size")},{value:"state",title:e("dashboard.sortBy.state")},{value:"super_seeding",title:e("dashboard.sortBy.super_seeding")},{value:"tags",title:e("dashboard.sortBy.tags")},{value:"time_active",title:e("dashboard.sortBy.time_active")},{value:"total_size",title:e("dashboard.sortBy.total_size")},{value:"tracker",title:e("dashboard.sortBy.tracker")},{value:"trackers_count",title:e("dashboard.sortBy.trackers_count")},{value:"up_limit",title:e("dashboard.sortBy.up_limit")},{value:"uploaded",title:e("dashboard.sortBy.uploaded")},{value:"uploaded_session",title:e("dashboard.sortBy.uploaded_session")},{value:"upspeed",title:e("dashboard.sortBy.upspeed")}].sort((r,i)=>r.title.localeCompare(i.title));D.splice(0,0,{value:"",title:e("dashboard.sortBy.default")});const C=F(!1),P=Re({isVisible:!1,offset:[0,0]}),W=w({get:()=>_.value,set:ht(r=>{_.value=r},300)}),{paginatedResults:de,currentPage:L,pageCount:Z}=mt(d,$.paginationSize,V),ce=w(()=>!!_.value&&_.value.length>0),ee=w(()=>d.value.length<=k.value.length);function O(r){C.value=r??!C.value,C.value&&Be(()=>{document.getElementById("searchInput")?.focus()})}function ue(r){m.toggleSelect(r)}function pe(r){h.value||l.push({name:"torrentDetail",params:{hash:r}})}function te(){_.value=""}function z(){window.scrollTo({top:0,behavior:"smooth"})}function q(){h.value&&m.unselectAllTorrents(),h.value=!h.value}function me(){ee.value?m.unselectAllTorrents():m.selectTorrents(...d.value.map(r=>r.hash))}async function ae(r,i){r.preventDefault(),P.isVisible&&(P.isVisible=!1,await Be()),P.isVisible=!0,P.offset=[r.pageX,r.pageY],h.value?k.value.length===0&&m.selectTorrent(i.hash):(m.unselectAllTorrents(),m.selectTorrent(i.hash))}Qe(()=>P.isVisible,r=>{!r&&!h.value&&m.unselectAllTorrents()});function oe(r){if(y.hasActiveDialog)return!1;const i=r.target;if(ye(r)&&r.key==="a"&&i.tagName!=="INPUT")return m.unselectAllTorrents(),m.selectTorrents(...d.value.map(c=>c.hash)),r.preventDefault(),!0;if(ye(r)&&r.key==="f"){const c=document.getElementById("searchInput");if(document.activeElement!==c)return O(!0),r.preventDefault(),!0}if(r.key==="Escape"){const c=document.getElementById("searchInput");return document.activeElement===c||C.value?O(!1):(h.value=!1,m.unselectAllTorrents()),r.preventDefault(),!0}if(r.key==="Delete")return k.value.length===0?void 0:(y.createDialog(Ge,{hashes:m.selectedTorrents}),r.preventDefault(),!0)}be(async()=>{await S.fetchCategories(),await S.fetchTags(),O(ce.value)}),Le(()=>{document.addEventListener("keydown",oe),h.value=!1,z()}),We(()=>{document.removeEventListener("keydown",oe)});const le=F();function he(r,i){le.value=setTimeout(()=>{ae(r,i)},500)}function f(){clearTimeout(le.value)}return(r,i)=>(s(),b(K,null,[p("div",ma,[a(Ce,{class:"ma-0 pa-0 mb-2"},{default:o(()=>[a(De,null,{default:o(()=>[ve(a(H,{color:"transparent"},{default:o(()=>[a(se,{id:"searchInput",modelValue:W.value,"onUpdate:modelValue":i[0]||(i[0]=c=>W.value=c),label:n(e)("dashboard.searchInputLabel"),clearable:"",density:"compact","hide-details":"","prepend-inner-icon":"mdi-magnify",rounded:"pill","single-line":"",style:{width:"200px"},variant:"solo","onClick:clear":i[1]||(i[1]=c=>te())},null,8,["modelValue","label"])]),_:1},512),[[_e,C.value]])]),_:1}),a(U,{text:n(e)("dashboard.toggleSearchFilter"),location:"top"},{activator:o(({props:c})=>[a(I,R({icon:C.value?"mdi-chevron-left-circle":"mdi-text-box-search"},c,{variant:"plain",onClick:i[2]||(i[2]=G=>O())}),null,16,["icon"])]),_:1},8,["text"]),a(U,{text:n(e)("dashboard.toggleSelectMode"),location:"top"},{activator:o(({props:c})=>[a(I,R({icon:n(h)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline"},c,{variant:"plain",onClick:q}),null,16,["icon"])]),_:1},8,["text"]),a(U,{text:n(e)("dashboard.toggleSortOrder"),location:"top"},{activator:o(({props:c})=>[a(I,R({icon:n(v).reverseOrder?"mdi-arrow-up-thin":"mdi-arrow-down-thin"},c,{variant:"plain",onClick:i[3]||(i[3]=G=>n(v).reverseOrder=!n(v).reverseOrder)}),null,16,["icon"])]),_:1},8,["text"]),p("div",ha,[a(dt,{modelValue:n(v).sortBy,"onUpdate:modelValue":i[4]||(i[4]=c=>n(v).sortBy=c),items:n(D),label:n(e)("dashboard.sortLabel"),"auto-select-first":"",density:"compact","hide-details":"",variant:"solo-filled"},null,8,["modelValue","items","label"])]),a(ct,{class:"align-center justify-center"},{default:o(()=>[p("span",va,u(n(A)),1)]),_:1})]),_:1}),a(Ce,{class:"ma-0 pa-0"},{default:o(()=>[a(ut,null,{default:o(()=>[ve(a(H,{color:"transparent"},{default:o(()=>[a(U,{text:n(e)("common.selectAll"),location:"bottom"},{activator:o(({props:c})=>[a(I,R({icon:ee.value?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",class:"text-grey",color:"transparent",style:{left:"-8px"}},c,{onClick:me}),null,16,["icon"])]),_:1},8,["text"]),p("span",_a,u(n(e)("dashboard.selectAll")),1)]),_:1},512),[[_e,n(h)]])]),_:1})]),_:1}),n(m).filteredTorrents.length===0?(s(),b("div",fa,[p("p",ga,u(n(e)("common.emptyList")),1)])):(s(),b("div",ya,[a(we,{id:"torrentList",class:"pa-0",color:"transparent"},{default:o(()=>[n($).isPaginationOnTop&&!n($).isInfiniteScrollActive?(s(),T(Y,{key:0},{default:o(()=>[a(Ie,{modelValue:n(L),"onUpdate:modelValue":i[5]||(i[5]=c=>ne(L)?L.value=c:null),length:n(Z),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left",onInput:z},null,8,["modelValue","length"])]),_:1})):N("",!0),(s(!0),b(K,null,X(n(de),c=>(s(),T(Y,{id:`torrent-${c.hash}`,class:Ae([n(t).mobile?"mb-2":"mb-4","pa-0"]),onContextmenu:G=>ae(G,c),onTouchcancel:f,onTouchend:f,onTouchmove:f,onTouchstart:he,onDblclick:j(G=>pe(c.hash),["prevent"])},{default:o(()=>[p("div",ba,[a(De,null,{default:o(()=>[ve(a(H,{class:"mr-3",color:"transparent"},{default:o(()=>[a(I,{icon:n(m).isTorrentInSelection(c.hash)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",color:"transparent",variant:"flat",onClick:G=>ue(c.hash)},null,8,["icon","onClick"])]),_:2},1536),[[_e,n(m).isSelectionMultiple]])]),_:2},1024),a(ea,{torrent:c},null,8,["torrent"])])]),_:2},1032,["id","class","onContextmenu","onDblclick"]))),256)),!n($).isPaginationOnTop&&!n($).isInfiniteScrollActive?(s(),T(Y,{key:1},{default:o(()=>[a(Ie,{modelValue:n(L),"onUpdate:modelValue":i[6]||(i[6]=c=>ne(L)?L.value=c:null),length:n(Z),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left",onInput:z},null,8,["modelValue","length"])]),_:1})):N("",!0)]),_:1})]))]),p("div",{style:Ze(`position: absolute; left: ${P.offset[0]}px; top: ${P.offset[1]}px;`)},[a(pa,{modelValue:P.isVisible,"onUpdate:modelValue":i[7]||(i[7]=c=>P.isVisible=c)},null,8,["modelValue"])],4)],64))}});export{Ba as default};
