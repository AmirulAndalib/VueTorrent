import{g as P,T as z,G,d as X,r as Y,c as Z,H as J,x as O,V as W,I as r,W as V,m as e,K as s,X as i,M as u,u as o,J as h,Q as R,O as m,F as S,Y as q,Z as ee,L as x,N as A}from"./vue-xro1BXWT.js";import{u as te,__tla as __tla_0}from"./ArrayPagination-pshze3RF.js";import{l as le,m as se,X as ne,r as oe,s as ae,v as $,w as D,x as y,h as f,y as p,e as re,Y as ie,g as N,C as B,B as ue,G as de,H as ce,j as me,i as fe,V as pe,Z as ve,$ as Ve,c as ge,K as _e,__tla as __tla_1}from"./index-Rb7I8NTk.js";import{d as ke}from"./index-IJbALWao.js";import"./vuetify-04q2fUhk.js";let Ie;let __tla=Promise.all([(()=>{try{return __tla_0}catch{}})(),(()=>{try{return __tla_1}catch{}})()]).then(async()=>{let he,ye,Ce,xe,Ae,be,we,Te,Le,Re;he={class:"pa-3"};ye={class:"subtitle-1 ml-2",style:{"font-size":"1.6em !important"}};Ce={class:"d-flex justify-end"};xe={class:"d-flex flex-row align-center justify-center"};Ae={class:"d-flex"};be={key:0};we={key:1};Te={class:"d-flex flex-column"};Le=["innerHTML"];Re=P({__name:"RssArticles",setup(Se){const F=z(),{t:g}=G(),I=le(),U=se(),a=ne(),M=oe(),v=X(!1),_=Y({title:"",content:""}),C=Z({get:()=>a.filters.title,set:ke(t=>{a.filters.title=t??""},300)}),k=ae(()=>a.articles.sort((t,n)=>Number(n.parsedDate)-Number(t.parsedDate)),()=>C.value,t=>t.title),{paginatedResults:j,currentPage:c,pageCount:b}=te(k.results,15);function H(t){const n=M.useIdForRssLinks?t.id:t.link;window.open(n,"_blank","noreferrer")}function E(t){t.description&&(_.title=t.title.trim(),_.content=t.description.trim(),v.value=!0)}function Q(t){I.pushTorrentToQueue(t.torrentURL)}async function w(t){await a.markArticleAsRead(t.id)}function T(){F.push({name:"dashboard"})}function L(t){if(U.hasActiveDialog||v.value)return!1;t.key==="Escape"&&T()}return J(async()=>{await a.fetchFeeds()}),O(()=>{document.addEventListener("keydown",L)}),W(()=>{document.removeEventListener("keydown",L)}),(t,n)=>(r(),V("div",he,[e($,{align:"center",justify:"center","no-gutters":""},{default:s(()=>[e(y,null,{default:s(()=>[i("h1",ye,u(o(g)("rssArticles.title")),1)]),_:1}),e(y,null,{default:s(()=>[i("div",Ce,[e(f,{icon:"mdi-close",variant:"plain",onClick:T})])]),_:1})]),_:1}),e(D,null,{default:s(()=>[e(p,null,{default:s(()=>[e($,null,{default:s(()=>[e(y,{cols:"12"},{default:s(()=>[e(re,{modelValue:C.value,"onUpdate:modelValue":n[0]||(n[0]=l=>C.value=l),label:t.$t("rssArticles.filters.title"),clearable:"","hide-details":""},null,8,["modelValue","label"])]),_:1}),e(y,{cols:"12"},{default:s(()=>[i("div",xe,[e(ie,{modelValue:o(a).filters.unread,"onUpdate:modelValue":n[1]||(n[1]=l=>o(a).filters.unread=l),label:t.$t("rssArticles.filters.unread"),"hide-details":""},null,8,["modelValue","label"]),e(N),e(f,{disabled:o(a).unreadArticles.length===0,text:t.$t("rssArticles.markAllAsRead"),color:"primary",onClick:n[2]||(n[2]=l=>o(a).markAllAsRead())},null,8,["disabled","text"])])]),_:1})]),_:1})]),_:1}),o(k).results.value.length?(r(),h(p,{key:0},{default:s(()=>[e(B,{modelValue:o(c),"onUpdate:modelValue":n[3]||(n[3]=l=>R(c)?c.value=l:null),length:o(b),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left"},null,8,["modelValue","length"])]),_:1})):m("",!0),e(p,null,{default:s(()=>[e(D,null,{default:s(()=>[(r(!0),V(S,null,q(o(j),(l,K)=>(r(),V(S,null,[K>0?(r(),h(ue,{key:0,color:"white"})):m("",!0),e(p,{class:ee({"rss-read":l.isRead}),onClick:d=>E(l),onContextmenu:d=>w(l)},{default:s(()=>[i("div",Ae,[i("div",null,[e(de,{class:"wrap-anywhere",style:{"white-space":"unset"}},{default:s(()=>[x(u(l.title),1)]),_:2},1024),e(ce,{class:"d-block"},{default:s(()=>[i("div",null,u(l.parsedDate.toLocaleString()),1),i("div",null,u(o(g)("rssArticles.item.feedName",{name:o(a).getFeedNames(l.id).join(" | ")})),1),l.author?(r(),V("div",be,u(o(g)("rssArticles.item.author",{author:l.author})),1)):m("",!0),l.category?(r(),V("div",we,u(o(g)("rssArticles.item.category",{category:l.category})),1)):m("",!0)]),_:2},1024)]),e(N),i("div",Te,[e(f,{icon:"mdi-open-in-new",variant:"text",onClick:A(d=>H(l),["stop"])},null,8,["onClick"]),e(f,{color:"accent",icon:"mdi-check",variant:"text",onClick:A(d=>w(l),["stop"])},null,8,["onClick"]),e(f,{icon:"mdi-download",variant:"text",onClick:A(d=>Q(l),["stop"])},null,8,["onClick"])])]),e(me,{modelValue:v.value,"onUpdate:modelValue":n[5]||(n[5]=d=>v.value=d)},{default:s(()=>[e(fe,null,{default:s(()=>[e(pe,null,{default:s(()=>[e(ve,{color:"transparent"},{default:s(()=>[e(Ve,null,{default:s(()=>[x(u(_.title),1)]),_:1}),e(f,{icon:"mdi-close",onClick:n[4]||(n[4]=d=>v.value=!1)})]),_:1})]),_:1}),e(ge,null,{default:s(()=>[i("div",{class:"description-container",innerHTML:_.content},null,8,Le)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:2},1032,["class","onClick","onContextmenu"])],64))),256)),o(k).results.value.length===0?(r(),h(p,{key:0},{default:s(()=>[x(u(t.$t("common.emptyList")),1)]),_:1})):m("",!0)]),_:1})]),_:1}),o(k).results.value.length?(r(),h(p,{key:1},{default:s(()=>[e(B,{modelValue:o(c),"onUpdate:modelValue":n[6]||(n[6]=l=>R(c)?c.value=l:null),length:o(b),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left"},null,8,["modelValue","length"])]),_:1})):m("",!0)]),_:1})]))}});Ie=_e(Re,[["__scopeId","data-v-40701c63"]])});export{Ie as default,__tla};