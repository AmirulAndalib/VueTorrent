import{h as k,f as R,d as S,i as F,j as U,k as q,r as A,b as L,l as O,m as j,n as z,V as W,ao as Y,ap as Z,o as G,g as $,p as J,q as Q}from"./index-bHqiKHRF.js";import{g as _,ae as X,a3 as o,a4 as s,a5 as a,ab as x,W as c,Z as i,aa as m,a8 as g,m as l,a9 as I,af as K,ag as N,F as E,av as ee,as as ae,a6 as oe,K as te,d as T,r as le,c as D,N as se,u as C,Y as ne,ap as re,D as de}from"./vue-OSX-kU20.js";const ie={class:"d-flex"},ue={key:2},me={key:3},ce=_({__name:"RightClickMenuEntry",props:{text:{},icon:{},action:{type:Function},hidden:{type:Boolean},disabled:{type:Boolean},disabledText:{},disabledIcon:{},children:{}},setup(p){const t=p,n=()=>{t.action&&t.action()};return(e,u)=>{const v=X("RightClickMenuEntry",!0);return e.hidden?m("",!0):(o(),s(U,{key:0,class:"px-3",disabled:e.disabled,onClick:n},{default:a(()=>[x("div",ie,[e.disabled&&e.disabledIcon?(o(),s(k,{key:0,class:"mr-2"},{default:a(()=>[c(i(e.disabledIcon),1)]),_:1})):e.icon?(o(),s(k,{key:1,class:"mr-2"},{default:a(()=>[c(i(e.icon),1)]),_:1})):m("",!0),e.disabled&&e.disabledText?(o(),g("span",ue,i(e.disabledText),1)):(o(),g("span",me,i(e.text),1)),l(R),!e.disabled&&e.children?(o(),s(k,{key:4},{default:a(()=>[c("mdi-chevron-right")]),_:1})):m("",!0)]),e.children?(o(),s(S,{key:0,activator:"parent","open-on-hover":"","open-on-click":"","close-delay":"10","open-delay":"0",location:"right"},{default:a(()=>[l(F,null,{default:a(()=>[(o(!0),g(E,null,I(e.children,h=>(o(),s(v,K(N(h)),null,16))),256))]),_:1})]),_:1})):m("",!0)]),_:1},8,["disabled"]))}}}),ve=_({__name:"RightClickMenu",props:ee({menuData:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const t=ae(p,"modelValue");return(n,e)=>t.value?(o(),s(S,{key:0,modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=u=>t.value=u),activator:"parent","close-on-content-click":!0,transition:"slide-y-transition","scroll-strategy":"none"},{default:a(()=>[l(F,null,{default:a(()=>[oe(n.$slots,"top"),(o(!0),g(E,null,I(n.menuData,u=>(o(),s(ce,K(N(u)),null,16))),256))]),_:3})]),_:3},8,["modelValue"])):m("",!0)}}),he=_({__name:"MoveTorrentDialog",props:{guid:{},hashes:{},mode:{}},setup(p){const t=p,{isOpened:n}=q(t.guid),{t:e}=te(),u=A(),v=L(),h=T(),w=T(),V=T(!1),y=le({newPath:""}),H=[r=>!!r||e("dialogs.moveTorrent.required")],M=D(()=>t.hashes.map(v.getTorrentByHash)),b=D(()=>{switch(t.mode){case"dl":return M.value[0]?.download_path;case"save":return M.value[0]?.savePath}});async function P(){await h.value?.validate(),V.value&&(await u.toggleAutoTmm(t.hashes,!1),await v.moveTorrents(t.mode,t.hashes,y.newPath),w.value?.saveValueToHistory(),B())}const B=()=>{n.value=!1};return se(()=>{y.newPath=b.value||""}),(r,d)=>(o(),s(Q,{modelValue:C(n),"onUpdate:modelValue":d[3]||(d[3]=f=>de(n)?n.value=f:null)},{default:a(()=>[l(J,null,{default:a(()=>[l(O,null,{default:a(()=>[c(i(r.$t(`dialogs.moveTorrent.${r.mode}.title`)),1)]),_:1}),l(j,null,{default:a(()=>[l(C(z),{modelValue:V.value,"onUpdate:modelValue":d[1]||(d[1]=f=>V.value=f),ref_key:"form",ref:h,onSubmit:d[2]||(d[2]=ne(()=>{},["prevent"]))},{default:a(()=>[b.value?(o(),s(W,{key:0,"model-value":b.value,disabled:"",label:r.$t("dialogs.moveTorrent.oldPath")},null,8,["model-value","label"])):m("",!0),l(Y,{modelValue:y.newPath,"onUpdate:modelValue":d[0]||(d[0]=f=>y.newPath=f),historyKey:C(Z).TORRENT_PATH,ref_key:"field",ref:w,rules:H,autofocus:"",label:r.$t("dialogs.moveTorrent.newPath"),onKeydown:re(P,["enter"])},null,8,["modelValue","historyKey","label"])]),_:1},8,["modelValue"])]),_:1}),l(G,null,{default:a(()=>[l(R),l($,{color:"error",onClick:B},{default:a(()=>[c(i(r.$t("common.cancel")),1)]),_:1}),l($,{color:"accent",disabled:!V.value,onClick:P},{default:a(()=>[c(i(r.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});export{he as _,ve as a};
