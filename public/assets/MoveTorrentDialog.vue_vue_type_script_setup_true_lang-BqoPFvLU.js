import{k as b,h as S,Y as D,I as R,J as E,a as L,Z as U,$ as A,V as O,c as q,d as J,e as j,f as G,v as Q,H as W,g as X,i as B,j as Y,__tla as __tla_0}from"./index-CvSZb7K1.js";import{g as C,a2 as Z,I as o,J as s,K as a,X as z,L as c,M as i,O as m,W as g,m as l,a0 as F,n as H,F as K,a3 as x,a4 as ee,a5 as ae,G as oe,d as T,r as te,c as I,H as le,u as _,N as se,P as ne,Q as re}from"./vue-BFqQp3p5.js";let pe,ve;let __tla=Promise.all([(()=>{try{return __tla_0}catch{}})()]).then(async()=>{let de,ie,ue,me;de={class:"d-flex"};ie={key:2};ue={key:3};me=C({__name:"RightClickMenuEntry",props:{text:{},icon:{},action:{type:Function},hidden:{type:Boolean},disabled:{type:Boolean},disabledText:{},disabledIcon:{},children:{}},setup(f){const t=f,n=()=>{t.action&&t.action()};return(e,u)=>{const v=Z("RightClickMenuEntry",!0);return e.hidden?m("",!0):(o(),s(E,{key:0,class:"px-3",disabled:e.disabled,onClick:n},{default:a(()=>[z("div",de,[e.disabled&&e.disabledIcon?(o(),s(b,{key:0,class:"mr-2"},{default:a(()=>[c(i(e.disabledIcon),1)]),_:1})):e.icon?(o(),s(b,{key:1,class:"mr-2"},{default:a(()=>[c(i(e.icon),1)]),_:1})):m("",!0),e.disabled&&e.disabledText?(o(),g("span",ie,i(e.disabledText),1)):(o(),g("span",ue,i(e.text),1)),l(S),!e.disabled&&e.children?(o(),s(b,{key:4},{default:a(()=>[c("mdi-chevron-right")]),_:1})):m("",!0)]),e.children?(o(),s(D,{key:0,activator:"parent","open-on-hover":"","open-on-click":"","close-delay":"10","open-delay":"0",location:"right"},{default:a(()=>[l(R,null,{default:a(()=>[(o(!0),g(K,null,F(e.children,h=>(o(),s(v,H({ref_for:!0},h),null,16))),256))]),_:1})]),_:1})):m("",!0)]),_:1},8,["disabled"]))}}});pe=C({__name:"RightClickMenu",props:x({menuData:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const t=ee(f,"modelValue");return(n,e)=>t.value?(o(),s(D,{key:0,modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=u=>t.value=u),activator:"parent","close-on-content-click":!0,transition:"slide-y-transition","scroll-strategy":"none"},{default:a(()=>[l(R,null,{default:a(()=>[ae(n.$slots,"top"),(o(!0),g(K,null,F(n.menuData,u=>(o(),s(me,H({ref_for:!0},u),null,16))),256))]),_:3})]),_:3},8,["modelValue"])):m("",!0)}});ve=C({__name:"MoveTorrentDialog",props:{guid:{},hashes:{},mode:{}},setup(f){const t=f,{isOpened:n}=L(t.guid),{t:e}=oe(),u=U(),v=A(),h=T(),w=T(),V=T(!1),y=te({newPath:""}),N=[r=>!!r||e("dialogs.moveTorrent.required")],M=I(()=>t.hashes.map(v.getTorrentByHash)),k=I(()=>{switch(t.mode){case"dl":return M.value[0]?.download_path;case"save":return M.value[0]?.savePath}});async function P(){await h.value?.validate(),V.value&&(await u.toggleAutoTmm(t.hashes,!1),await v.moveTorrents(t.mode,t.hashes,y.newPath),w.value?.saveValueToHistory(),$())}const $=()=>{n.value=!1};return le(()=>{y.newPath=k.value||""}),(r,d)=>(o(),s(Y,{modelValue:_(n),"onUpdate:modelValue":d[3]||(d[3]=p=>re(n)?n.value=p:null)},{default:a(()=>[l(O,null,{default:a(()=>[l(q,null,{default:a(()=>[c(i(r.$t(`dialogs.moveTorrent.${r.mode}.title`)),1)]),_:1}),l(J,null,{default:a(()=>[l(_(j),{modelValue:V.value,"onUpdate:modelValue":d[1]||(d[1]=p=>V.value=p),ref_key:"form",ref:h,onSubmit:d[2]||(d[2]=se(()=>{},["prevent"]))},{default:a(()=>[k.value?(o(),s(G,{key:0,"model-value":k.value,disabled:"",label:r.$t("dialogs.moveTorrent.oldPath")},null,8,["model-value","label"])):m("",!0),l(Q,{modelValue:y.newPath,"onUpdate:modelValue":d[0]||(d[0]=p=>y.newPath=p),historyKey:_(W).TORRENT_PATH,ref_key:"field",ref:w,rules:N,autofocus:"",label:r.$t("dialogs.moveTorrent.newPath"),onKeydown:ne(P,["enter"])},null,8,["modelValue","historyKey","label"])]),_:1},8,["modelValue"])]),_:1}),l(X,null,{default:a(()=>[l(S),l(B,{color:"error",onClick:$},{default:a(()=>[c(i(r.$t("common.cancel")),1)]),_:1}),l(B,{color:"accent",disabled:!V.value,onClick:P},{default:a(()=>[c(i(r.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}})});export{pe as _,ve as a,__tla};