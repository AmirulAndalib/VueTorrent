import{A as b,_ as y,a6 as x,d as C,r as h,h as k,$ as S,a0 as A,a1 as s,D as e,V as c,Z as m,u as r,Y as p,ag as g}from"./vue-aae79161.js";import{_ as K}from"./PasswordField.vue_vue_type_script_setup_true_lang-9f4b53ec.js";import{s as q,aO as T,aP as B,i as F,aI as I,j as O,t as U,v as D,m as L,w as M,x as N,k as R,af as v}from"./index-80cae97b.js";const Z=b({__name:"Login",setup($){const{t:a}=q(),f=y(),V=x(),d=T(),o=C({username:"",password:""}),i=h(!1),w={username:[u=>!!u||a("login.rules.username_required")],password:[u=>!!u||a("login.rules.password_required")]},l=async()=>{i.value&&(await d.login(o.username,o.password),d.isAuthenticated?(v.success(a("login.success")),_()):v.error(a("login.error")))},_=()=>{V.query.redirect?f.push(V.query.redirect):f.push({name:"dashboard"})};return k(()=>{d.isAuthenticated&&_()}),(u,t)=>(S(),A(B,{class:"mt-16"},{default:s(()=>[e(R,{class:"mx-auto",rounded:"lg","min-width":"250"},{default:s(()=>[e(F,null,{default:s(()=>[c(m(r(a)("login.title")),1)]),_:1}),e(I,null,{default:s(()=>[c(m(r(a)("login.subtitle")),1)]),_:1}),e(O,null,{default:s(()=>[e(U,{modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=n=>i.value=n),onSubmit:p(l,["prevent"])},{default:s(()=>[e(D,{modelValue:o.username,"onUpdate:modelValue":t[0]||(t[0]=n=>o.username=n),label:r(a)("login.username"),autofocus:"",rules:w.username,onKeydown:g(p(l,["prevent"]),["enter"]),variant:"outlined"},{prepend:s(()=>[e(L,{color:"accent",icon:"mdi-account"})]),_:1},8,["modelValue","label","rules","onKeydown"]),e(K,{modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=n=>o.password=n),label:r(a)("login.password"),rules:w.password,"prepend-icon":"mdi-lock",onKeydown:g(p(l,["prevent"]),["enter"]),variant:"outlined"},null,8,["modelValue","label","rules","onKeydown"])]),_:1},8,["modelValue","onSubmit"])]),_:1}),e(M,null,{default:s(()=>[e(N,{variant:"elevated",block:"",color:"accent",onClick:l},{default:s(()=>[c(m(r(a)("login.submit")),1)]),_:1})]),_:1})]),_:1})]),_:1}))}});export{Z as default};
