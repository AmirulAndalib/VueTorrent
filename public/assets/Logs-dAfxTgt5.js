import{u as z,__tla as __tla_0}from"./ArrayPagination-BhwJxPDs.js";import{q as D,r as H,L as a,s as K,t as J,v as R,w as Q,x as g,h as X,y as m,z as Y,A as Z,B as c,e as ee,C as S,D as te,E as le,F as ae,G as se,g as ne,H as oe,I as ue,J as ie,K as re,__tla as __tla_1}from"./index-vnOXiX7i.js";import{g as de,T as me,G as ce,d as I,c as f,H as pe,V as ge,I as i,W as T,m as e,K as t,X as F,M as r,u as n,J as v,Q as b,O as y,F as w,Y as fe,Z as ve,L as V}from"./vue-xro1BXWT.js";import"./vuetify-pZKj9X0w.js";let ke;let __tla=Promise.all([(()=>{try{return __tla_0}catch{}})(),(()=>{try{return __tla_1}catch{}})()]).then(async()=>{let ye,Ve,Le,_e;ye={class:"pa-3"};Ve={style:{"font-size":"1.6em !important"},class:"subtitle-1 ml-2"};Le={class:"d-flex justify-end"};_e=de({__name:"Logs",setup(he){const B=me(),{t:E}=ce(),L=D(),O=H(),_=I([{title:a[a.NORMAL],value:a.NORMAL},{title:a[a.INFO],value:a.INFO},{title:a[a.WARNING],value:a.WARNING},{title:a[a.CRITICAL],value:a.CRITICAL}]),u=I([a.NORMAL,a.INFO,a.WARNING,a.CRITICAL]),h=I(""),P=f(()=>L.logs),G=f(()=>P.value.filter(l=>u.value.includes(l.type))),{results:C}=K(G,h,l=>l.message),N=f(()=>u.value.length>0),k=f(()=>u.value.length===_.value.length),{paginatedResults:M,currentPage:d,pageCount:p}=z(C,30),A=()=>{B.push({name:"dashboard"})},U=l=>`logtype-${a[l?.type]?.toLowerCase()}`,$=l=>a[l.type],W=l=>ie(l.timestamp*1e3).format(O.dateFormat),j=()=>{k.value?u.value=[]:u.value=_.value.map(l=>l.value)},x=l=>{l.key==="Escape"&&A()};return pe(async()=>{document.addEventListener("keydown",x),await L.cleanAndFetchLogs(),J(L.fetchLogs,15e3)}),ge(()=>{document.removeEventListener("keydown",x)}),(l,o)=>(i(),T("div",ye,[e(R,{"no-gutters":"",align:"center",justify:"center"},{default:t(()=>[e(g,null,{default:t(()=>[F("h1",Ve,r(n(E)("logs.title")),1)]),_:1}),e(g,null,{default:t(()=>[F("div",Le,[e(X,{icon:"mdi-close",variant:"plain",onClick:A})])]),_:1})]),_:1}),e(Q,null,{default:t(()=>[e(m,null,{default:t(()=>[e(R,null,{default:t(()=>[e(g,{cols:"6"},{default:t(()=>[e(Y,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=s=>u.value=s),items:_.value,label:l.$t("logs.filters.type"),"hide-details":"",multiple:"",chips:""},{"prepend-item":t(()=>[e(m,{title:l.$t("common.selectAll"),onClick:j},{prepend:t(()=>[e(Z,{indeterminate:N.value&&!k.value,"model-value":N.value},null,8,["indeterminate","model-value"])]),_:1},8,["title"]),e(c)]),_:1},8,["modelValue","items","label"])]),_:1}),e(g,{cols:"6"},{default:t(()=>[e(ee,{modelValue:h.value,"onUpdate:modelValue":o[1]||(o[1]=s=>h.value=s),label:l.$t("logs.filters.query"),"hide-details":""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),e(c,{class:"my-3",thickness:"5"}),n(p)>1?(i(),v(m,{key:0},{default:t(()=>[e(S,{modelValue:n(d),"onUpdate:modelValue":o[2]||(o[2]=s=>b(d)?d.value=s:null),length:n(p),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):y("",!0),e(c),(i(!0),T(w,null,fe(n(M),(s,q)=>(i(),T(w,null,[q>0?(i(),v(c,{key:0})):y("",!0),e(m,{class:ve([U(s),"pa-0"])},{default:t(()=>[e(te,{class:"p-0"},{default:t(()=>[e(le,{class:"pa-0"},{default:t(()=>[e(ae,null,{default:t(()=>[e(se,null,{default:t(()=>[V("["+r(s.id)+"] "+r(s.message),1)]),_:2},1024),e(ne),e(oe,null,{default:t(()=>[V(r($(s))+" | "+r(W(s)),1)]),_:2},1024)]),_:2},1024),e(ue,{class:"wrap-word text-select"},{default:t(()=>[V(r(s.message),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["class"])],64))),256)),n(C).length===0?(i(),v(m,{key:1},{default:t(()=>[V(r(l.$t("logs.emptyLogList")),1)]),_:1})):y("",!0),e(c),n(p)>1?(i(),v(m,{key:2},{default:t(()=>[e(S,{modelValue:n(d),"onUpdate:modelValue":o[3]||(o[3]=s=>b(d)?d.value=s:null),length:n(p),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):y("",!0)]),_:1})]))}});ke=re(_e,[["__scopeId","data-v-3cdb1628"]])});export{ke as default,__tla};