import{g as K,$ as q,K as W,d as Y,r as Z,c as G,M as J,x as O,I as X,a1 as r,a6 as V,m as e,a3 as l,ab as i,Z as u,u as n,a2 as h,D as L,a8 as m,F as S,a7 as ee,a5 as te,W as A,Y as x}from"./vue-0NZhD3Uy.js";import{u as le}from"./ArrayPagination-MXRoimcE.js";import{au as se,v as ae,ah as ne,y as oe,av as re,q as D,c as $,r as y,k as f,d as p,i as ie,a2 as ue,a as N,N as F,a3 as de,aw as ce,ax as me,m as fe,l as pe,f as ve,ad as Ve,ae as _e,g as ke,_ as ge}from"./index-ItdboNGy.js";import"./faker-5h0oDfpe.js";import{d as he}from"./index-BJw7WBvX.js";import"./vuetify-7_W8e7Y_.js";const ye={class:"pa-3"},Ce={class:"subtitle-1 ml-2",style:{"font-size":"1.6em !important"}},Ae={class:"d-flex justify-end"},xe={class:"d-flex flex-row align-center justify-center"},we={class:"d-flex"},be={key:0},Re={key:1},Te={class:"d-flex flex-column"},Le=["innerHTML"],Se=K({__name:"RssArticles",setup(De){const I=q(),{t:_}=W(),U=se(),B=ae(),o=ne(),M=oe(),v=Y(!1),k=Z({title:"",content:""}),C=G({get:()=>o.filters.title,set:he(t=>{o.filters.title=t??""},300)}),g=re(()=>o.articles.sort((t,a)=>Number(a.parsedDate)-Number(t.parsedDate)),()=>C.value,t=>t.title),{paginatedResults:j,currentPage:c,pageCount:w}=le(g.results,15);function E(t){const a=M.useIdForRssLinks?t.id:t.link;window.open(a,"_blank","noreferrer")}function H(t){t.description&&(k.title=t.title.trim(),k.content=t.description.trim(),v.value=!0)}function P(t){U.pushTorrentToQueue(t.torrentURL)}async function b(t){await o.markArticleAsRead(t.id)}async function Q(){await o.markAllAsRead()}function R(){I.push({name:"dashboard"})}function T(t){if(B.hasActiveDialog||v.value)return!1;t.key==="Escape"&&R()}return J(async()=>{await o.fetchFeeds()}),O(()=>{document.addEventListener("keydown",T)}),X(()=>{document.removeEventListener("keydown",T)}),(t,a)=>(r(),V("div",ye,[e(D,{align:"center",justify:"center","no-gutters":""},{default:l(()=>[e(y,null,{default:l(()=>[i("h1",Ce,u(n(_)("rssArticles.title")),1)]),_:1}),e(y,null,{default:l(()=>[i("div",Ae,[e(f,{icon:"mdi-close",variant:"plain",onClick:R})])]),_:1})]),_:1}),e($,null,{default:l(()=>[e(p,null,{default:l(()=>[e(D,null,{default:l(()=>[e(y,{cols:"12"},{default:l(()=>[e(ie,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=s=>C.value=s),label:t.$t("rssArticles.filters.title"),clearable:"","hide-details":""},null,8,["modelValue","label"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[i("div",xe,[e(ue,{modelValue:n(o).filters.unread,"onUpdate:modelValue":a[1]||(a[1]=s=>n(o).filters.unread=s),label:t.$t("rssArticles.filters.unread"),"hide-details":""},null,8,["modelValue","label"]),e(N),e(f,{text:t.$t("rssArticles.markAllAsRead"),color:"primary",onClick:Q},null,8,["text"])])]),_:1})]),_:1})]),_:1}),n(g).results.value.length?(r(),h(p,{key:0},{default:l(()=>[e(F,{modelValue:n(c),"onUpdate:modelValue":a[2]||(a[2]=s=>L(c)?c.value=s:null),length:n(w),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left"},null,8,["modelValue","length"])]),_:1})):m("",!0),e(p,null,{default:l(()=>[e($,null,{default:l(()=>[(r(!0),V(S,null,ee(n(j),(s,z)=>(r(),V(S,null,[z>0?(r(),h(de,{key:0,color:"white"})):m("",!0),e(p,{class:te({"rss-read":s.isRead}),onClick:d=>H(s),onContextmenu:d=>b(s)},{default:l(()=>[i("div",we,[i("div",null,[e(ce,{class:"wrap-anywhere",style:{"white-space":"unset"}},{default:l(()=>[A(u(s.title),1)]),_:2},1024),e(me,{class:"d-block"},{default:l(()=>[i("div",null,u(s.parsedDate.toLocaleString()),1),i("div",null,u(n(_)("rssArticles.item.feedName",{name:n(o).getFeedNames(s.id).join(" | ")})),1),s.author?(r(),V("div",be,u(n(_)("rssArticles.item.author",{author:s.author})),1)):m("",!0),s.category?(r(),V("div",Re,u(n(_)("rssArticles.item.category",{category:s.category})),1)):m("",!0)]),_:2},1024)]),e(N),i("div",Te,[e(f,{icon:"mdi-open-in-new",variant:"text",onClick:x(d=>E(s),["stop"])},null,8,["onClick"]),e(f,{color:"accent",icon:"mdi-check",variant:"text",onClick:x(d=>b(s),["stop"])},null,8,["onClick"]),e(f,{icon:"mdi-download",variant:"text",onClick:x(d=>P(s),["stop"])},null,8,["onClick"])])]),e(fe,{modelValue:v.value,"onUpdate:modelValue":a[4]||(a[4]=d=>v.value=d)},{default:l(()=>[e(pe,null,{default:l(()=>[e(ve,null,{default:l(()=>[e(Ve,{color:"transparent"},{default:l(()=>[e(_e,null,{default:l(()=>[A(u(k.title),1)]),_:1}),e(f,{icon:"mdi-close",onClick:a[3]||(a[3]=d=>v.value=!1)})]),_:1})]),_:1}),e(ke,null,{default:l(()=>[i("div",{class:"description-container",innerHTML:k.content},null,8,Le)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:2},1032,["class","onClick","onContextmenu"])],64))),256)),n(g).results.value.length===0?(r(),h(p,{key:0},{default:l(()=>[A(u(t.$t("common.emptyList")),1)]),_:1})):m("",!0)]),_:1})]),_:1}),n(g).results.value.length?(r(),h(p,{key:1},{default:l(()=>[e(F,{modelValue:n(c),"onUpdate:modelValue":a[5]||(a[5]=s=>L(c)?c.value=s:null),length:n(w),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left"},null,8,["modelValue","length"])]),_:1})):m("",!0)]),_:1})]))}}),Me=ge(Se,[["__scopeId","data-v-87c5959f"]]);export{Me as default};
