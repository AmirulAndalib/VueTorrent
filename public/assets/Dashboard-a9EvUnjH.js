import{g as C,ae as Tt,a2 as d,a3 as $,a4 as s,ab as _,W as B,Z as m,a9 as M,a7 as b,m as n,a8 as K,af as We,ag as Ze,F,K as Ie,d as N,r as Qe,c as V,N as De,x as Je,u,Y as J,ao as Ce,D as _e,$ as et,a1 as ze,n as G,ap as tt,aq as ot,S as Ne,a6 as oe,O as Ee,Q as Ue,a0 as Se,w as kt,q as $t,ar as Ct,A as Oe}from"./vue-XHfgLFXq.js";import{V as ie,a as we,b as xe,c as Pe,d as de,u as Ge,e as ue,f as Fe,g as ge,h as He,i as ee,j as Ke,k as R,l as ae,m as Ye,n as Ae,o as St,p as Me,q as be,r as te,s as $e,t as Z,v as at,w as Vt,x as W,C as nt,_ as Q,y as x,z as Ve,A as It,B as Dt,D as rt,E as lt,F as Et,G as wt,H as E,I as st,J as Pt,T as Y,K as At,L as Bt,R as Lt,S as p,M as X,N as Ot,O as je,P as Re,Q as Mt}from"./index-KNBrCHP7.js";import{_ as qe}from"./dayjs-iWUY8qw_.js";import{d as ce}from"./dayjs.min-bb5lKVNH.js";import{Z as it}from"./vuetify-9K5dQHv0.js";import{d as Rt}from"./index--Xpy-TFq.js";import{u as Nt}from"./ArrayPagination-mGf4Elgm.js";const Ut={class:"d-flex"},xt={key:2},Gt={key:3},Ft=C({__name:"RightClickMenuEntry",props:{text:{},icon:{},action:{type:Function},hidden:{type:Boolean},disabled:{type:Boolean},disabledText:{},disabledIcon:{},divider:{type:Boolean},children:{}},setup(h){return(e,r)=>{const t=Tt("RightClickMenuEntry",!0);return e.hidden?M("",!0):(d(),$(de,{key:0,class:"px-3 pointer",disabled:e.disabled,onClick:e.action},{default:s(()=>[_("div",Ut,[e.disabled&&e.disabledIcon?(d(),$(ie,{key:0,class:"mr-2"},{default:s(()=>[B(m(e.disabledIcon),1)]),_:1})):e.icon?(d(),$(ie,{key:1,class:"mr-2"},{default:s(()=>[B(m(e.icon),1)]),_:1})):M("",!0),e.disabled&&e.disabledText?(d(),b("span",xt,m(e.disabledText),1)):(d(),b("span",Gt,m(e.text),1)),n(we),!e.disabled&&e.children?(d(),$(ie,{key:4},{default:s(()=>[B("mdi-chevron-right")]),_:1})):M("",!0)]),e.children?(d(),$(xe,{key:0,activator:"parent","open-on-hover":!0,"open-on-click":!0,"close-delay":"0","open-delay":"0",location:"right"},{default:s(()=>[n(Pe,null,{default:s(()=>[(d(!0),b(F,null,K(e.children,a=>(d(),$(t,We(Ze(a)),null,16))),256))]),_:1})]),_:1})):M("",!0)]),_:1},8,["disabled","onClick"]))}}}),Ht=C({__name:"RenameTorrentDialog",props:{guid:{},hash:{}},setup(h){const e=h,{isOpened:r}=Ge(e.guid),{t}=Ie(),a=ue(),i=N(),o=N(),l=N(!1),c=Qe({newName:""}),v=[k=>!!k||t("dialogs.renameTorrent.required"),k=>k!==I.value||t("dialogs.renameTorrent.sameName")],g=V(()=>a.getTorrentByHash(e.hash)),I=V(()=>g.value?.name);async function D(){await o.value?.validate(),l.value&&(await a.renameTorrent(e.hash,c.newName),f())}const f=()=>{r.value=!1};return De(()=>{c.newName=g.value?.name||""}),Je(()=>{i.value?.select()}),(k,P)=>(d(),$(Ye,{modelValue:u(r),"onUpdate:modelValue":P[3]||(P[3]=w=>_e(r)?r.value=w:null)},{default:s(()=>[n(ae,null,{default:s(()=>[n(Fe,null,{default:s(()=>[B(m(k.$t("dialogs.renameTorrent.title")),1)]),_:1}),n(ge,null,{default:s(()=>[n(u(He),{modelValue:l.value,"onUpdate:modelValue":P[1]||(P[1]=w=>l.value=w),ref_key:"form",ref:o,onSubmit:P[2]||(P[2]=J(()=>{},["prevent"]))},{default:s(()=>[I.value?(d(),$(ee,{key:0,"model-value":I.value,disabled:"",label:k.$t("dialogs.renameTorrent.oldName")},null,8,["model-value","label"])):M("",!0),n(ee,{modelValue:c.newName,"onUpdate:modelValue":P[0]||(P[0]=w=>c.newName=w),ref_key:"field",ref:i,rules:v,autofocus:"",label:k.$t("dialogs.renameTorrent.newName"),onKeydown:Ce(D,["enter"])},null,8,["modelValue","label"])]),_:1},8,["modelValue"])]),_:1}),n(Ke,null,{default:s(()=>[n(we),n(R,{color:"error",onClick:f},{default:s(()=>[B(m(k.$t("common.cancel")),1)]),_:1}),n(R,{color:"accent",disabled:!l.value,onClick:D},{default:s(()=>[B(m(k.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),se=-2,q=-1,Kt=C({__name:"ShareLimitDialog",props:{guid:{},hashes:{}},setup(h){const e=h,{isOpened:r}=Ge(e.guid),t=Ae(),a=ue(),i=N(!1),o=N("global"),l=N(!1),c=N(0),v=N(!1),g=N(0),I=N(!1),D=N(0),f=V(()=>o.value!=="enabled");function k(){r.value=!1}async function P(){switch(o.value){case"global":await t.setShareLimit(e.hashes,se,se,se);break;case"disabled":await t.setShareLimit(e.hashes,q,q,q);break;case"enabled":await t.setShareLimit(e.hashes,l.value?c.value:q,v.value?g.value:q,I.value?D.value:q);break}k()}return De(async()=>{const w=a.getTorrentByHash(e.hashes[0]);if(!w)return k();const T=w.ratio_limit,S=w.seeding_time_limit,z=w.inactive_seeding_time_limit;T===se&&S===se&&z===se?o.value="global":T===q&&S===q&&z===q?o.value="disabled":(o.value="enabled",l.value=T>=0,c.value=l.value?T:0,v.value=S>=0,g.value=v.value?S:0,I.value=z>=0,D.value=I.value?z:0)}),(w,T)=>(d(),$(Ye,{modelValue:u(r),"onUpdate:modelValue":T[9]||(T[9]=S=>_e(r)?r.value=S:null),"max-width":"500"},{default:s(()=>[n(ae,{title:w.$t("dialogs.share_limit.title")},{default:s(()=>[n(ge,null,{default:s(()=>[n(He,{modelValue:i.value,"onUpdate:modelValue":T[7]||(T[7]=S=>i.value=S),onSubmit:T[8]||(T[8]=J(()=>{},["prevent"])),onKeydown:Ce(J(P,["prevent"]),["enter"])},{default:s(()=>[n(St,{modelValue:o.value,"onUpdate:modelValue":T[0]||(T[0]=S=>o.value=S)},{default:s(()=>[n(Me,{label:w.$t("dialogs.share_limit.global"),value:"global"},null,8,["label"]),n(Me,{label:w.$t("dialogs.share_limit.disabled"),value:"disabled"},null,8,["label"]),n(Me,{label:w.$t("dialogs.share_limit.enabled"),value:"enabled"},null,8,["label"])]),_:1},8,["modelValue"]),n(be,null,{default:s(()=>[n(te,{cols:"12",class:"d-flex align-center"},{default:s(()=>[_("span",null,[n($e,{modelValue:l.value,"onUpdate:modelValue":T[1]||(T[1]=S=>l.value=S),disabled:f.value},null,8,["modelValue","disabled"])]),n(ee,{modelValue:c.value,"onUpdate:modelValue":T[2]||(T[2]=S=>c.value=S),disabled:f.value||!l.value,density:"compact","hide-details":"",label:w.$t("dialogs.share_limit.ratio_limit")},null,8,["modelValue","disabled","label"])]),_:1}),n(te,{cols:"12",class:"d-flex align-center"},{default:s(()=>[_("span",null,[n($e,{modelValue:v.value,"onUpdate:modelValue":T[3]||(T[3]=S=>v.value=S),disabled:f.value},null,8,["modelValue","disabled"])]),n(ee,{modelValue:g.value,"onUpdate:modelValue":T[4]||(T[4]=S=>g.value=S),disabled:f.value||!v.value,density:"compact","hide-details":"",label:w.$t("dialogs.share_limit.seeding_time_limit")},null,8,["modelValue","disabled","label"])]),_:1}),n(te,{cols:"12",class:"d-flex align-center"},{default:s(()=>[_("span",null,[n($e,{modelValue:I.value,"onUpdate:modelValue":T[5]||(T[5]=S=>I.value=S),disabled:f.value},null,8,["modelValue","disabled"])]),n(ee,{modelValue:D.value,"onUpdate:modelValue":T[6]||(T[6]=S=>D.value=S),disabled:f.value||!I.value,density:"compact","hide-details":"",label:w.$t("dialogs.share_limit.inactive_seeding_time_limit")},null,8,["modelValue","disabled","label"])]),_:1})]),_:1})]),_:1},8,["modelValue","onKeydown"])]),_:1}),n(Ke,null,{default:s(()=>[n(we),n(R,{color:"error",onClick:k},{default:s(()=>[B(m(w.$t("common.cancel")),1)]),_:1}),n(R,{color:"accent",disabled:!i.value,onClick:P},{default:s(()=>[B(m(w.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]))}}),Xe=C({__name:"SpeedLimitDialog",props:{guid:{},hashes:{},mode:{}},setup(h){const e=h,{isOpened:r}=Ge(e.guid),t=Ae(),a=ue(),i=N(!1),o=N(0);function l(){r.value=!1}async function c(){const v=Math.max(0,o.value)*1e3;switch(e.mode){case"download":await t.setDownloadLimit(v,e.hashes);break;case"upload":await t.setUploadLimit(v,e.hashes);break}l()}return De(async()=>{const v=a.getTorrentByHash(e.hashes[0]);if(!v)return l();switch(e.mode){case"download":o.value=Math.max(0,Math.round(v.dl_limit/1e3));break;case"upload":o.value=Math.max(0,Math.round(v.up_limit/1e3));break}}),(v,g)=>(d(),$(Ye,{modelValue:u(r),"onUpdate:modelValue":g[3]||(g[3]=I=>_e(r)?r.value=I:null)},{default:s(()=>[n(ae,{title:v.$t(`dialogs.speed_limit.${v.mode}`)},{default:s(()=>[n(ge,null,{default:s(()=>[n(He,{modelValue:i.value,"onUpdate:modelValue":g[1]||(g[1]=I=>i.value=I),onSubmit:g[2]||(g[2]=J(()=>{},["prevent"])),onKeydown:Ce(J(c,["prevent"]),["enter"])},{default:s(()=>[n(ee,{modelValue:o.value,"onUpdate:modelValue":g[0]||(g[0]=I=>o.value=I),type:"number",autofocus:"",clearable:"",label:v.$t("dialogs.speed_limit.label"),"prepend-inner-icon":"mdi-speedometer",suffix:"kB/s",onKeydown:Ce(J(c,["prevent"]),["enter"])},null,8,["modelValue","label","onKeydown"])]),_:1},8,["modelValue","onKeydown"])]),_:1}),n(Ke,null,{default:s(()=>[n(we),n(R,{color:"error",onClick:l},{default:s(()=>[B(m(v.$t("common.cancel")),1)]),_:1}),n(R,{color:"accent",disabled:!i.value,onClick:c},{default:s(()=>[B(m(v.$t("common.save")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]))}}),Be=h=>(tt("data-v-8f57aba4"),h=h(),ot(),h),Yt={class:"d-flex justify-space-around"},zt=Be(()=>_("span",null,"Resume",-1)),jt=Be(()=>_("span",null,"Force Resume",-1)),qt=Be(()=>_("span",null,"Pause",-1)),Xt=Be(()=>_("span",null,"Delete",-1)),Wt=C({__name:"RightClickMenu",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(h,{emit:e}){const r=h,t=e,{t:a}=Ie(),i=et(),o=Z(),l=at(),c=Ae(),v=Vt(),g=ue(),I=V({get:()=>r.modelValue,set:A=>t("update:modelValue",A)}),D=V(()=>o.selectedTorrents.length>1),f=V(()=>o.selectedTorrents),k=V(()=>f.value[0]),P=V(()=>g.getTorrentByHash(k.value)),w=V(()=>o.selectedTorrents.map(g.getTorrentByHash).filter(A=>!!A)),T=V(()=>[{name:""},...c.categories]);async function S(){await g.resumeTorrents(f)}async function z(){await g.forceResumeTorrents(f)}async function H(){await g.pauseTorrents(f)}function me(){l.createDialog(nt,{hashes:[...o.selectedTorrents]})}function ye(){l.createDialog(qe,{hashes:[...o.selectedTorrents],mode:"dl"})}function Le(){l.createDialog(qe,{hashes:[...o.selectedTorrents],mode:"save"})}function pe(){l.createDialog(Ht,{hash:o.selectedTorrents[0]})}async function ve(){await g.recheckTorrents(f)}async function he(){await c.reannounceTorrents(f)}async function ne(){await c.toggleSeqDl(f)}async function Te(){await c.toggleFLPiecePrio(f)}async function fe(){await c.toggleAutoTmm(f,!P.value?.auto_tmm)}function re(A){return w.value.every(j=>j&&j.tags&&j.tags.includes(A))}async function ke(A){re(A)?await g.removeTorrentTags(f.value,[A]):await g.addTorrentTags(f.value,[A])}async function y(A){try{await navigator.clipboard.writeText(A)}catch{ze.error(a("toast.copy.error"));return}ze.success(a("toast.copy.success"))}function L(){l.createDialog(Xe,{hashes:f.value,mode:"download"})}function O(){l.createDialog(Xe,{hashes:f.value,mode:"upload"})}function bt(){l.createDialog(Kt,{hashes:f.value})}async function gt(){f.value.forEach(A=>{g.exportTorrent(A).then(j=>{const U=window.URL.createObjectURL(j),le=document.createElement("a");le.href=U,le.style.opacity="0",le.setAttribute("download",`${A}.torrent`),document.body.appendChild(le),le.click(),document.body.removeChild(le)})})}const yt=V(()=>[{text:a("dashboard.right_click.advanced.title"),icon:"mdi-head-cog",children:[{text:a("dashboard.right_click.advanced.download_path"),icon:"mdi-tray-arrow-down",action:ye},{text:a("dashboard.right_click.advanced.save_path"),icon:"mdi-content-save",action:Le},{text:a("dashboard.right_click.advanced.rename"),icon:"mdi-rename-box",hidden:D.value,action:pe},{text:a("dashboard.right_click.advanced.recheck"),icon:"mdi-playlist-check",action:ve},{text:a("dashboard.right_click.advanced.reannounce"),icon:"mdi-bullhorn",action:he},{text:a("dashboard.right_click.advanced.seq_dl"),icon:P.value?.seq_dl?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:ne},{text:a("dashboard.right_click.advanced.f_l_prio"),icon:P.value?.f_l_piece_prio?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:Te},{text:a("dashboard.right_click.advanced.auto_tmm"),icon:P.value?.auto_tmm?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:fe}]},{text:a("dashboard.right_click.priority.title"),icon:"mdi-priority-high",hidden:!v.preferences.queueing_enabled,children:[{text:a("dashboard.right_click.priority.top"),icon:"mdi-priority-high",action:async()=>await g.setTorrentPriority(f.value,"topPrio")},{text:a("dashboard.right_click.priority.increase"),icon:"mdi-arrow-up",action:async()=>await g.setTorrentPriority(f.value,"increasePrio")},{text:a("dashboard.right_click.priority.decrease"),icon:"mdi-arrow-down",action:async()=>await g.setTorrentPriority(f.value,"decreasePrio")},{text:a("dashboard.right_click.priority.bottom"),icon:"mdi-priority-low",action:async()=>await g.setTorrentPriority(f.value,"bottomPrio")}]},{text:a("dashboard.right_click.tags.title"),icon:"mdi-tag",disabled:c.tags.length===0,disabledText:a("dashboard.right_click.tags.disabled_title"),disabledIcon:"mdi-tag-off",children:c.tags.map(A=>({text:A,icon:re(A)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",action:async()=>await ke(A)}))},{text:a("dashboard.right_click.category.title"),icon:"mdi-label",disabled:c.categories.length===0,disabledText:a("dashboard.right_click.category.disabled_title"),disabledIcon:"mdi-label-off",children:T.value.map(A=>({text:A.name===""?a("dashboard.right_click.category.clear"):A.name,action:async()=>await g.setTorrentCategory(f.value,A.name)}))},{text:a("dashboard.right_click.speed_limit.title"),icon:"mdi-speedometer-slow",children:[{text:a("dashboard.right_click.speed_limit.download"),icon:"mdi-download",action:L},{text:a("dashboard.right_click.speed_limit.upload"),icon:"mdi-upload",action:O},{text:a("dashboard.right_click.speed_limit.share"),icon:"mdi-account-group",action:bt}]},{text:a("dashboard.right_click.copy.title"),icon:"mdi-content-copy",hidden:D.value,children:[{text:a("dashboard.right_click.copy.name"),icon:"mdi-alphabetical-variant",action:async()=>P.value&&await y(P.value.name)},{text:a("dashboard.right_click.copy.hash"),icon:"mdi-pound",action:async()=>await y(k.value)},{text:a("dashboard.right_click.copy.magnet"),icon:"mdi-magnet",action:async()=>P.value&&await y(P.value.magnet)}]},{text:a("dashboard.right_click.export",o.selectedTorrents.length),icon:D.value?"mdi-download-multiple":"mdi-download",action:gt},{text:a("dashboard.right_click.info"),icon:"mdi-information",hidden:D.value,action:()=>i.push({name:"torrentDetail",params:{hash:k.value}})}]);return(A,j)=>I.value?(d(),$(xe,{key:0,modelValue:I.value,"onUpdate:modelValue":j[0]||(j[0]=U=>I.value=U),activator:"parent","close-on-content-click":!0,transition:"slide-y-transition","scroll-strategy":"none"},{default:s(()=>[n(Pe,null,{default:s(()=>[n(de,null,{default:s(()=>[_("div",Yt,[n(W,{location:"top"},{activator:s(({props:U})=>[n(R,G({density:"compact",variant:"plain",icon:"mdi-play"},U,{onClick:S}),null,16)]),default:s(()=>[zt]),_:1}),n(W,{location:"top"},{activator:s(({props:U})=>[n(R,G({density:"compact",variant:"plain",icon:"mdi-fast-forward"},U,{onClick:z}),null,16)]),default:s(()=>[jt]),_:1}),n(W,{location:"top"},{activator:s(({props:U})=>[n(R,G({density:"compact",variant:"plain",icon:"mdi-pause"},U,{onClick:H}),null,16)]),default:s(()=>[qt]),_:1}),n(W,{location:"top"},{activator:s(({props:U})=>[n(R,G({color:"red",density:"compact",variant:"plain",icon:"mdi-delete-forever"},U,{onClick:me}),null,16)]),default:s(()=>[Xt]),_:1})])]),_:1}),(d(!0),b(F,null,K(yt.value,U=>(d(),$(Ft,We(Ze(U)),null,16))),256))]),_:1})]),_:1},8,["modelValue"])):M("",!0)}}),Zt=Q(Wt,[["__scopeId","data-v-8f57aba4"]]),Qt={class:"d-flex flex-column"},Jt={class:"text-caption text-grey"},eo={class:"text-caption text-grey"},dt=C({__name:"ItemAmount",props:{torrent:{},title:{},value:{},total:{}},setup(h){return(e,r)=>(d(),b("div",Qt,[_("div",Jt,m(e.$t(`torrent.properties.${e.title}`)),1),_("div",null,[B(m(e.torrent[e.value])+" ",1),_("span",eo," / "+m(e.torrent[e.total]),1)])]))}}),to={key:0,class:"d-flex flex-column"},oo={class:"text-caption text-grey"},ao={class:"d-flex flex-row gap"},no=C({__name:"ItemChip",props:{torrent:{},title:{},value:{},color:{}},setup(h){const e=h,r=x(),t=V(()=>{const i=e.torrent[e.value],o=typeof i;if(o==="string")return i.length>0?[i]:[];if(o==="object")return i}),a=V(()=>t.value.length<1);return(i,o)=>u(r).hideChipIfUnset&&a.value?M("",!0):(d(),b("div",to,[_("div",oo,m(i.$t(`torrent.properties.${i.title}`)),1),_("div",ao,[!t.value||a.value?(d(),$(Ve,{key:0,color:i.color.replace("$1",i.torrent[i.value]),variant:"flat"},{default:s(()=>[B(m(i.$t(`torrent.properties.empty_${i.value}`)),1)]),_:1},8,["color"])):(d(!0),b(F,{key:1},K(t.value,l=>(d(),$(Ve,{color:i.color.replace("$1",i.torrent.state),variant:"flat"},{default:s(()=>[B(m(l),1)]),_:2},1032,["color"]))),256))])]))}}),ut=Q(no,[["__scopeId","data-v-08ef66f1"]]),ro={class:"d-flex flex-column"},lo={class:"text-caption text-grey"},so={class:"text-caption text-grey"},ct=C({__name:"ItemData",props:{torrent:{},title:{},value:{}},setup(h){const e=x();return(r,t)=>(d(),b("div",ro,[_("div",lo,m(r.$t(`torrent.properties.${r.title}`)),1),_("div",null,[B(m(u(It)(r.torrent[r.value],u(e).useBinarySize))+" ",1),_("span",so,m(u(Dt)(r.torrent[r.value],u(e).useBinarySize)),1)])]))}}),io={class:"d-flex flex-column"},uo={class:"text-caption text-grey"},co={key:0},mo={key:1},mt=C({__name:"ItemDateTime",props:{torrent:{},title:{},value:{}},setup(h){const e=x();return(r,t)=>(d(),b("div",io,[_("div",uo,m(r.$t(`torrent.properties.${r.title}`)),1),_("div",null,[r.torrent[r.value]>0?(d(),b("span",co,m(u(ce)(r.torrent[r.value]*1e3).format(u(e).dateFormat??"DD/MM/YYYY, HH:mm:ss")),1)):(d(),b("span",mo,m(r.$t("dashboard.not_complete")),1))])]))}}),po={class:"d-flex flex-column"},vo={class:"text-caption text-grey"},ho={key:0},fo={key:1},pt=C({__name:"ItemDuration",props:{torrent:{},title:{},value:{}},setup(h){const e=h,r=V(()=>{const t=ce.duration(e.torrent[e.value],"seconds"),a=[t.years(),t.months(),t.days(),t.hours(),t.minutes(),t.seconds()],i=["Y","M","d","h","m","s"];let o=!1;return a.map((l,c)=>{if(o||l)return o=!0,`${l}${i[c]}`}).filter(l=>l).join(" ")});return(t,a)=>(d(),b("div",po,[_("div",vo,m(t.$t(`torrent.properties.${t.title}`)),1),_("div",null,[t.torrent[t.value]>0?(d(),b("span",ho,m(r.value),1)):(d(),b("span",fo,m(t.$t("dashboard.not_complete")),1))])]))}}),_o={class:"d-flex flex-column"},bo={class:"text-caption text-grey"},vt=C({__name:"ItemPercent",props:{torrent:{},title:{},value:{}},setup(h){return(e,r)=>(d(),b("div",_o,[_("div",bo,m(e.$t(`torrent.properties.${e.title}`)),1),n(lt,{"model-value":e.torrent[e.value],max:1,height:20,color:`torrent-${e.torrent.state}`,rounded:"sm",style:{width:"10em"}},{default:s(()=>[B(m(u(rt)(e.torrent[e.value])),1)]),_:1},8,["model-value","color"])]))}}),go={class:"d-flex flex-column"},yo={class:"text-caption text-grey"},ht=C({__name:"ItemRelativeTime",props:{torrent:{},title:{},value:{}},setup(h){return(e,r)=>(d(),b("div",go,[_("div",yo,m(e.$t(`torrent.properties.${e.title}`)),1),_("div",null,[_("span",null,m(u(ce)(e.torrent[e.value]*1e3).fromNow()),1)])]))}}),To={class:"d-flex flex-column"},ko={class:"text-caption text-grey"},$o={class:"text-caption text-grey"},ft=C({__name:"ItemSpeed",props:{torrent:{},title:{},value:{}},setup(h){const e=x();return(r,t)=>(d(),b("div",To,[_("div",ko,m(r.$t(`torrent.properties.${r.title}`)),1),_("div",null,[B(m(u(Et)(r.torrent[r.value],u(e).useBitSpeed))+" ",1),_("span",$o,m(u(wt)(r.torrent[r.value],u(e).useBitSpeed)),1)])]))}}),Co={class:"d-flex flex-column"},So={class:"text-caption text-grey"},_t=C({__name:"ItemText",props:{torrent:{},title:{},value:{}},setup(h){return(e,r)=>(d(),b("div",Co,[_("div",So,m(e.$t(`torrent.properties.${e.title}`)),1),_("div",null,m(e.torrent[e.value]),1)]))}}),Vo={class:"d-flex gap flex-wrap"},Io=C({__name:"GridTorrent",props:{torrent:{}},emits:["onTorrentClick"],setup(h){const e=h,r=Z(),t=x(),a=V(()=>(e.torrent.progress===1?t.doneGridProperties:t.busyGridProperties).filter(c=>c.active).sort((c,v)=>c.order-v.order)),i=l=>{switch(l){case E.AMOUNT:return dt;case E.CHIP:return ut;case E.DATA:return ct;case E.DATETIME:return mt;case E.DURATION:return pt;case E.PERCENT:return vt;case E.RELATIVE:return ht;case E.SPEED:return ft;case E.TEXT:default:return _t}},o=V(()=>r.isTorrentInSelection(e.torrent.hash));return(l,c)=>(d(),$(ae,{class:oe(`sideborder ${l.torrent.state} pointer`),height:"100%",color:o.value?`torrent-${l.torrent.state}-darken-3`:void 0,onClick:c[0]||(c[0]=v=>l.$emit("onTorrentClick",v,l.torrent))},{default:s(()=>[n(Fe,{class:"text-wrap text-subtitle-1 pt-1 pb-0"},{default:s(()=>[B(m(l.torrent.name),1)]),_:1}),n(ge,null,{default:s(()=>[_("div",Vo,[(d(!0),b(F,null,K(a.value,v=>(d(),$(Ne(i(v.type)),G({torrent:l.torrent},v.props),null,16,["torrent"]))),256))])]),_:1})]),_:1},8,["class","color"]))}}),Do=Q(Io,[["__scopeId","data-v-4ea6ef97"]]),Eo={class:"d-flex align-center",style:{height:"100%",width:"100%"}},wo=C({__name:"GridView",props:{paginatedTorrents:{}},emits:["onCheckboxClick","onTorrentClick","onTorrentDblClick","onTorrentRightClick","startPress","endPress"],setup(h){const e=it(),r=Z();return(t,a)=>(d(),$(be,{id:"torrentList"},{default:s(()=>[(d(!0),b(F,null,K(t.paginatedTorrents,i=>(d(),$(te,{cols:"12",lg:"3",md:"4",sm:"6",xl:"2",class:oe([u(e).mobile?"pb-2":"pb-4","pt-0"]),onContextmenu:o=>t.$emit("onTorrentRightClick",o,i),onTouchcancel:a[1]||(a[1]=o=>t.$emit("endPress")),onTouchend:a[2]||(a[2]=o=>t.$emit("endPress")),onTouchmove:a[3]||(a[3]=o=>t.$emit("endPress")),onTouchstart:o=>t.$emit("startPress",o.touches.item(0),i),onDblclick:o=>t.$emit("onTorrentDblClick",i)},{default:s(()=>[_("div",Eo,[n(st,null,{default:s(()=>[Ee(n(R,{color:`torrent-${i.state}`,icon:u(r).isTorrentInSelection(i.hash)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",class:"mr-2",variant:"text",onClick:o=>t.$emit("onCheckboxClick",i)},null,8,["color","icon","onClick"]),[[Ue,u(r).isSelectionMultiple]])]),_:2},1024),n(Do,{torrent:i,onOnTorrentClick:a[0]||(a[0]=(o,l)=>t.$emit("onTorrentClick",o,l))},null,8,["torrent"])])]),_:2},1032,["class","onContextmenu","onTouchstart","onDblclick"]))),256))]),_:1}))}}),Po=Q(wo,[["__scopeId","data-v-8292d1aa"]]),Ao={class:"d-flex gap flex-wrap"},Bo=C({__name:"ListTorrent",props:{torrent:{}},emits:["onTorrentClick"],setup(h){const e=h,r=Z(),t=x(),a=V(()=>(e.torrent.progress===1?t.doneTorrentProperties:t.busyTorrentProperties).filter(c=>c.active).sort((c,v)=>c.order-v.order)),i=l=>{switch(l){case E.AMOUNT:return dt;case E.CHIP:return ut;case E.DATA:return ct;case E.DATETIME:return mt;case E.DURATION:return pt;case E.PERCENT:return vt;case E.RELATIVE:return ht;case E.SPEED:return ft;case E.TEXT:default:return _t}},o=V(()=>r.isTorrentInSelection(e.torrent.hash));return(l,c)=>(d(),$(ae,{class:oe(`sideborder ${l.torrent.state} pointer`),width:"100%",color:o.value?`torrent-${l.torrent.state}-darken-3`:void 0,onClick:c[0]||(c[0]=v=>l.$emit("onTorrentClick",v,l.torrent))},{default:s(()=>[n(Fe,{class:"text-wrap pt-1 pb-0 px-2 text-truncate",style:{"font-size":"0.97em"}},{default:s(()=>[B(m(l.torrent.name),1)]),_:1}),n(ge,{class:"pa-2 pt-0"},{default:s(()=>[_("div",Ao,[(d(!0),b(F,null,K(a.value,v=>(d(),$(Ne(i(v.type)),G({torrent:l.torrent},v.props),null,16,["torrent"]))),256))])]),_:1})]),_:1},8,["class","color"]))}}),Lo=Q(Bo,[["__scopeId","data-v-74669dd8"]]),Oo={class:"d-flex align-center"},Mo=C({__name:"ListView",props:{paginatedTorrents:{}},emits:["onCheckboxClick","onTorrentClick","onTorrentDblClick","onTorrentRightClick","startPress","endPress"],setup(h){const e=it(),r=Z();return(t,a)=>(d(),$(Pe,{id:"torrentList",class:"pa-0"},{default:s(()=>[(d(!0),b(F,null,K(t.paginatedTorrents,i=>(d(),$(de,{id:`torrent-${i.hash}`,class:oe([u(e).mobile?"mb-2":"mb-4","pa-0"]),onContextmenu:o=>t.$emit("onTorrentRightClick",o,i),onTouchcancel:a[1]||(a[1]=o=>t.$emit("endPress")),onTouchend:a[2]||(a[2]=o=>t.$emit("endPress")),onTouchmove:a[3]||(a[3]=o=>t.$emit("endPress")),onTouchstart:o=>t.$emit("startPress",o.touches.item(0),i),onDblclick:o=>t.$emit("onTorrentDblClick",i)},{default:s(()=>[_("div",Oo,[n(st,null,{default:s(()=>[Ee(n(R,{color:`torrent-${i.state}`,icon:u(r).isTorrentInSelection(i.hash)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",class:"mr-2",variant:"text",onClick:o=>t.$emit("onCheckboxClick",i)},null,8,["color","icon","onClick"]),[[Ue,u(r).isSelectionMultiple]])]),_:2},1024),n(Lo,{torrent:i,onOnTorrentClick:a[0]||(a[0]=(o,l)=>t.$emit("onTorrentClick",o,l))},null,8,["torrent"])])]),_:2},1032,["id","class","onContextmenu","onTouchstart","onDblclick"]))),256))]),_:1}))}}),Ro=Q(Mo,[["__scopeId","data-v-2b24c5da"]]),No=C({__name:"ItemAmount",props:{torrent:{},title:{},value:{},total:{}},setup(h){return(e,r)=>(d(),b("td",null,m(e.torrent[e.value])+" / "+m(e.torrent[e.total]),1))}}),Uo={key:0,class:"d-flex flex-row gap"},xo=C({__name:"ItemChip",props:{torrent:{},title:{},value:{},color:{}},setup(h){const e=h,r=x(),t=V(()=>{const i=e.torrent[e.value],o=typeof i;if(o==="string")return i.length>0?[i]:[];if(o==="object")return i}),a=V(()=>t.value.length<1);return(i,o)=>(d(),b("td",null,[u(r).hideChipIfUnset&&a.value?M("",!0):(d(),b("div",Uo,[!t.value||a.value?(d(),$(Ve,{key:0,color:i.color.replace("$1",i.torrent[i.value]),variant:"flat"},{default:s(()=>[B(m(i.$t(`torrent.properties.empty_${i.value}`)),1)]),_:1},8,["color"])):(d(!0),b(F,{key:1},K(t.value,l=>(d(),$(Ve,{color:i.color.replace("$1",i.torrent.state),variant:"flat"},{default:s(()=>[B(m(l),1)]),_:2},1032,["color"]))),256))]))]))}}),Go=Q(xo,[["__scopeId","data-v-23c01601"]]),Fo=C({__name:"ItemData",props:{torrent:{},title:{},value:{}},setup(h){const e=x();return(r,t)=>(d(),b("td",null,m(u(Pt)(r.torrent[r.value],u(e).useBinarySize)),1))}}),Ho={key:0},Ko={key:1},Yo=C({__name:"ItemDateTime",props:{torrent:{},title:{},value:{}},setup(h){const e=x();return(r,t)=>r.torrent[r.value]>0?(d(),b("td",Ho,m(u(ce)(r.torrent[r.value]*1e3).format(u(e).dateFormat??"DD/MM/YYYY, HH:mm:ss")),1)):(d(),b("td",Ko,m(r.$t("dashboard.not_complete")),1))}}),zo={key:0},jo={key:1},qo=C({__name:"ItemDuration",props:{torrent:{},title:{},value:{}},setup(h){const e=h,r=V(()=>{const t=ce.duration(e.torrent[e.value],"seconds"),a=[t.years(),t.months(),t.days(),t.hours(),t.minutes(),t.seconds()],i=["Y","M","d","h","m","s"];let o=!1;return a.map((l,c)=>{if(o||l)return o=!0,`${l}${i[c]}`}).filter(l=>l).join(" ")});return(t,a)=>t.torrent[t.value]>0?(d(),b("td",zo,m(r.value),1)):(d(),b("td",jo,m(t.$t("dashboard.not_complete")),1))}}),Xo=C({__name:"ItemPercent",props:{torrent:{},title:{},value:{}},setup(h){const e=h,r=V(()=>[Y.UPLOADING,Y.CHECKING_UP,Y.FORCED_UP,Y.ALLOCATING,Y.DOWNLOADING,Y.META_DL,Y.CHECKING_DL,Y.FORCED_DL,Y.CHECKING_RESUME_DATA,Y.MOVING].includes(e.torrent.state));return(t,a)=>(d(),b("td",null,[n(lt,{"model-value":t.torrent[t.value],max:1,striped:r.value,height:20,color:`torrent-${t.torrent.state}`,rounded:"sm",style:{width:"10em"}},{default:s(()=>[B(m(u(rt)(t.torrent[t.value])),1)]),_:1},8,["model-value","striped","color"])]))}}),Wo=C({__name:"ItemRelativeTime",props:{torrent:{},title:{},value:{}},setup(h){return(e,r)=>(d(),b("td",null,m(u(ce)(e.torrent[e.value]*1e3).fromNow()),1))}}),Zo=C({__name:"ItemSpeed",props:{torrent:{},title:{},value:{}},setup(h){const e=x();return(r,t)=>(d(),b("td",null,m(u(At)(r.torrent[r.value],u(e).useBitSpeed)),1))}}),Qo=C({__name:"ItemText",props:{torrent:{},title:{},value:{}},setup(h){return(e,r)=>(d(),b("td",null,m(e.torrent[e.value]),1))}}),Jo=C({__name:"TableTorrent",props:{torrent:{}},setup(h){const e=x(),r=V(()=>e.tableProperties.filter(a=>a.active).sort((a,i)=>a.order-i.order)),t=a=>{switch(a){case E.AMOUNT:return No;case E.CHIP:return Go;case E.DATA:return Fo;case E.DATETIME:return Yo;case E.DURATION:return qo;case E.PERCENT:return Xo;case E.RELATIVE:return Wo;case E.SPEED:return Zo;case E.TEXT:default:return Qo}};return(a,i)=>(d(!0),b(F,null,K(r.value,o=>(d(),$(Ne(t(o.type)),G({torrent:a.torrent},o.props),null,16,["torrent"]))),256))}}),ea=h=>(tt("data-v-d4523ffc"),h=h(),ot(),h),ta=ea(()=>_("th",{class:"px-1"},null,-1)),oa={key:0},aa={class:"text-left"},na={class:"text-left"},ra=["onContextmenu","onTouchstart","onClick","onDblclick"],la={key:0},sa=C({__name:"TableView",props:{paginatedTorrents:{}},emits:["onCheckboxClick","onTorrentClick","onTorrentDblClick","onTorrentRightClick","startPress","endPress"],setup(h){const e=Z(),r=x(),t=V(()=>r.tableProperties.filter(o=>o.active).sort((o,l)=>o.order-l.order));function a(o){return e.isTorrentInSelection(o.hash)}const i=o=>["pointer",a(o)?`bg-torrent-${o.state}-darken-3 selected`:""];return(o,l)=>(d(),$(Bt,{id:"torrentList",class:"pa-0",density:"compact"},{default:s(()=>[_("thead",null,[_("tr",null,[ta,u(e).isSelectionMultiple?(d(),b("th",oa)):M("",!0),_("th",aa,m(o.$t("torrent.properties.name")),1),(d(!0),b(F,null,K(t.value,c=>(d(),b("th",na,m(o.$t(`torrent.properties.${c.props.title}`)),1))),256))])]),_("tbody",null,[(d(!0),b(F,null,K(o.paginatedTorrents,c=>Ee((d(),b("tr",{class:oe(i(c)),onContextmenu:v=>o.$emit("onTorrentRightClick",v,c),onTouchcancel:l[0]||(l[0]=v=>o.$emit("endPress")),onTouchend:l[1]||(l[1]=v=>o.$emit("endPress")),onTouchmove:l[2]||(l[2]=v=>o.$emit("endPress")),onTouchstart:v=>o.$emit("startPress",v.touches.item(0),c),onClick:v=>o.$emit("onTorrentClick",v,c),onDblclick:v=>o.$emit("onTorrentDblClick",c)},[_("td",{class:oe(`pa-0 bg-torrent-${c.state}`)},null,2),u(e).isSelectionMultiple?(d(),b("td",la,[n($e,{"model-value":a(c),color:`torrent-${c.state}`,variant:"text",onClick:J(v=>o.$emit("onCheckboxClick",c),["stop"])},null,8,["model-value","color","onClick"])])):M("",!0),_("td",null,m(c.name),1),n(Jo,{torrent:c},null,8,["torrent"])],42,ra)),[[Lt]])),256))])]),_:1}))}}),ia=Q(sa,[["__scopeId","data-v-d4523ffc"]]),da={class:"pa-0",style:{width:"8em"}},ua={class:"text-uppercase",style:{float:"right","font-size":"0.8em"}},ca=C({__name:"Toolbar",setup(h){const{t:e}=Ie(),r=ue(),{sortOptions:t}=Se(r),a=Z(),{torrentCountString:i,isSelectionMultiple:o,displayMode:l}=Se(a),c=[{value:p.ADDED_ON,title:e("dashboard.sortBy.added_on")},{value:p.AMOUNT_LEFT,title:e("dashboard.sortBy.amount_left")},{value:p.AUTO_TMM,title:e("dashboard.sortBy.auto_tmm")},{value:p.AVAILABILITY,title:e("dashboard.sortBy.availability")},{value:p.AVG_DOWNLOAD_SPEED,title:e("dashboard.sortBy.avg_download_speed")},{value:p.AVG_UPLOAD_SPEED,title:e("dashboard.sortBy.avg_upload_speed")},{value:p.CATEGORY,title:e("dashboard.sortBy.category")},{value:p.COMPLETED,title:e("dashboard.sortBy.completed")},{value:p.COMPLETION_ON,title:e("dashboard.sortBy.completion_on")},{value:p.CONTENT_PATH,title:e("dashboard.sortBy.content_path")},{value:p.DL_LIMIT,title:e("dashboard.sortBy.dl_limit")},{value:p.DLSPEED,title:e("dashboard.sortBy.dlspeed")},{value:p.DOWNLOAD_PATH,title:e("dashboard.sortBy.download_path")},{value:p.DOWNLOADED,title:e("dashboard.sortBy.downloaded")},{value:p.DOWNLOADED_SESSION,title:e("dashboard.sortBy.downloaded_session")},{value:p.ETA,title:e("dashboard.sortBy.eta")},{value:p.F_L_PIECE_PRIO,title:e("dashboard.sortBy.f_l_piece_prio")},{value:p.FORCE_START,title:e("dashboard.sortBy.force_start")},{value:p.GLOBALSPEED,title:e("dashboard.sortBy.globalSpeed")},{value:p.GLOBALVOLUME,title:e("dashboard.sortBy.globalVolume")},{value:p.HASH,title:e("dashboard.sortBy.hash")},{value:p.INFOHASH_V1,title:e("dashboard.sortBy.infohash_v1")},{value:p.INFOHASH_V2,title:e("dashboard.sortBy.infohash_v2")},{value:p.LAST_ACTIVITY,title:e("dashboard.sortBy.last_activity")},{value:p.MAGNET_URI,title:e("dashboard.sortBy.magnet_uri")},{value:p.MAX_RATIO,title:e("dashboard.sortBy.max_ratio")},{value:p.MAX_SEEDING_TIME,title:e("dashboard.sortBy.max_seeding_time")},{value:p.NAME,title:e("dashboard.sortBy.name")},{value:p.NUM_COMPLETE,title:e("dashboard.sortBy.num_complete")},{value:p.NUM_INCOMPLETE,title:e("dashboard.sortBy.num_incomplete")},{value:p.NUM_LEECHS,title:e("dashboard.sortBy.num_leechs")},{value:p.NUM_SEEDS,title:e("dashboard.sortBy.num_seeds")},{value:p.PRIORITY,title:e("dashboard.sortBy.priority")},{value:p.PROGRESS,title:e("dashboard.sortBy.progress")},{value:p.RATIO,title:e("dashboard.sortBy.ratio")},{value:p.RATIO_LIMIT,title:e("dashboard.sortBy.ratio_limit")},{value:p.SAVE_PATH,title:e("dashboard.sortBy.save_path")},{value:p.SEEDING_TIME,title:e("dashboard.sortBy.seeding_time")},{value:p.SEEDING_TIME_LIMIT,title:e("dashboard.sortBy.seeding_time_limit")},{value:p.SEEN_COMPLETE,title:e("dashboard.sortBy.seen_complete")},{value:p.SEQ_DL,title:e("dashboard.sortBy.seq_dl")},{value:p.SIZE,title:e("dashboard.sortBy.size")},{value:p.STATE,title:e("dashboard.sortBy.state")},{value:p.SUPER_SEEDING,title:e("dashboard.sortBy.super_seeding")},{value:p.TAGS,title:e("dashboard.sortBy.tags")},{value:p.TIME_ACTIVE,title:e("dashboard.sortBy.time_active")},{value:p.TOTAL_SIZE,title:e("dashboard.sortBy.total_size")},{value:p.TRACKER,title:e("dashboard.sortBy.tracker")},{value:p.TRACKERS_COUNT,title:e("dashboard.sortBy.trackers_count")},{value:p.UP_LIMIT,title:e("dashboard.sortBy.up_limit")},{value:p.UPLOADED,title:e("dashboard.sortBy.uploaded")},{value:p.UPLOADED_SESSION,title:e("dashboard.sortBy.uploaded_session")},{value:p.UPSPEED,title:e("dashboard.sortBy.upspeed")}].sort((D,f)=>D.title.localeCompare(f.title));c.splice(0,0,{value:p.DEFAULT,title:e("dashboard.sortBy.default")});function v(){r.textFilter=""}const g=V({get:()=>r.textFilter,set:Rt(D=>{r.textFilter=D??""},300)});function I(){o.value&&a.unselectAllTorrents(),o.value=!o.value}return(D,f)=>(d(),$(be,{class:"ma-0 pa-0 mb-2"},{default:s(()=>[n(te,{cols:"9",md:"4",order:"2","order-md":"1",class:"ma-0 pa-0"},{default:s(()=>[n(be,{class:"ma-0 pa-0"},{default:s(()=>[n(W,{text:u(e)("dashboard.toggleSelectMode"),location:"top"},{activator:s(({props:k})=>[n(R,G({icon:u(o)?"mdi-checkbox-marked":"mdi-checkbox-blank-outline"},k,{variant:"plain",onClick:I}),null,16,["icon"])]),_:1},8,["text"]),n(xe,null,{activator:s(({props:k})=>[n(W,{text:D.$t("dashboard.displayMode.title"),location:"top"},{activator:s(({props:P})=>[n(R,G({icon:""},G(k,P),{variant:"plain"}),{default:s(()=>[u(l)===u(X).LIST?(d(),$(ie,{key:0,icon:"mdi-view-list"})):M("",!0),u(l)===u(X).GRID?(d(),$(ie,{key:1,icon:"mdi-view-grid"})):M("",!0),u(l)===u(X).TABLE?(d(),$(ie,{key:2,icon:"mdi-table"})):M("",!0)]),_:2},1040)]),_:2},1032,["text"])]),default:s(()=>[n(Pe,null,{default:s(()=>[n(de,{title:D.$t("dashboard.displayMode.list"),"prepend-icon":"mdi-view-list",onClick:f[0]||(f[0]=k=>l.value=u(X).LIST)},null,8,["title"]),n(de,{title:D.$t("dashboard.displayMode.grid"),"prepend-icon":"mdi-view-grid",onClick:f[1]||(f[1]=k=>l.value=u(X).GRID)},null,8,["title"]),n(de,{title:D.$t("dashboard.displayMode.table"),"prepend-icon":"mdi-table",onClick:f[2]||(f[2]=k=>l.value=u(X).TABLE)},null,8,["title"])]),_:1})]),_:1}),n(W,{text:u(e)("dashboard.toggleSortOrder"),location:"top"},{activator:s(({props:k})=>[n(R,G({icon:u(t).reverseOrder?"mdi-arrow-up-thin":"mdi-arrow-down-thin"},k,{variant:"plain",onClick:f[3]||(f[3]=P=>u(t).reverseOrder=!u(t).reverseOrder)}),null,16,["icon"])]),_:1},8,["text"]),_("div",da,[n(Ot,{modelValue:u(t).sortBy,"onUpdate:modelValue":f[4]||(f[4]=k=>u(t).sortBy=k),items:u(c),label:u(e)("dashboard.sortLabel"),"auto-select-first":"",density:"compact","hide-details":"",variant:"solo-filled"},null,8,["modelValue","items","label"])])]),_:1})]),_:1}),n(te,{cols:"10",md:"6",order:"1","order-md":"2",class:oe([D.$vuetify.display.smAndDown?"mb-4 mx-auto":"","ma-0 pa-0"])},{default:s(()=>[n(ae,{color:"transparent","max-width":"300"},{default:s(()=>[n(ee,{id:"searchInput",modelValue:g.value,"onUpdate:modelValue":f[5]||(f[5]=k=>g.value=k),label:u(e)("dashboard.searchInputLabel"),clearable:"",density:"compact","single-line":"","hide-details":"","prepend-inner-icon":"mdi-magnify",variant:"solo","onClick:clear":f[6]||(f[6]=k=>v())},null,8,["modelValue","label"])]),_:1})]),_:1},8,["class"]),n(te,{cols:"3",md:"2",order:"3",class:"align-center justify-center"},{default:s(()=>[_("span",ua,m(u(i)),1)]),_:1})]),_:1}))}}),ma={class:"pt-4 px-1 px-sm-5"},pa={class:"text-grey"},va={key:0,class:"mt-5 text-xs-center"},ha={class:"text-grey"},fa={key:1},_a={key:5},Sa=C({__name:"Dashboard",setup(h){const{t:e}=Ie(),r=et(),t=Z(),{currentPage:a,isSelectionMultiple:i,selectedTorrents:o,displayMode:l}=Se(t),c=at(),v=Ae(),g=ue(),{filteredTorrents:I}=Se(g),D=x(),f=V(()=>l.value===X.LIST),k=V(()=>l.value===X.GRID),P=V(()=>l.value===X.TABLE),{paginatedResults:w,currentPage:T,pageCount:S}=Nt(I,D.paginationSize,a),z=V(()=>I.value.length<=o.value.length),H=Qe({isVisible:!1,offset:[0,0]});function me(){window.scrollTo({top:0,behavior:"smooth"})}function ye(y){if(y)return Oe(()=>{document.getElementById("searchInput")?.focus()});Oe(()=>{document.getElementById("searchInput")?.blur()})}function Le(){z.value?t.unselectAllTorrents():t.selectTorrents(...I.value.map(y=>y.hash))}function pe(y){i.value||r.push({name:"torrentDetail",params:{hash:y.hash}})}function ve(y){t.toggleSelect(y.hash)}function he(y,L){y.shiftKey?t.spanTorrentSelection(L.hash):(Re(y)||t.isSelectionMultiple)&&(t.isSelectionMultiple=!0,t.toggleSelect(L.hash))}async function ne(y,L){H.isVisible&&(H.isVisible=!1,await Oe()),H.isVisible=!0,H.offset=[y.pageX,y.pageY],i.value?o.value.length===0&&t.selectTorrent(L.hash):(t.unselectAllTorrents(),t.selectTorrent(L.hash))}const Te=N();function fe(y,L){Te.value=setTimeout(()=>{ne(y,L)},500)}function re(){clearTimeout(Te.value)}function ke(y){if(c.hasActiveDialog)return!1;const L=y.target;if(Re(y)&&y.key==="a"&&L.tagName!=="INPUT")return t.unselectAllTorrents(),t.selectTorrents(...I.value.map(O=>O.hash)),y.preventDefault(),!0;if(Re(y)&&y.key==="f"){const O=document.getElementById("searchInput");if(document.activeElement!==O)return ye(!0),y.preventDefault(),!0}if(y.key==="Escape"){const O=document.getElementById("searchInput");return document.activeElement===O?ye(!1):(i.value=!1,t.unselectAllTorrents()),y.preventDefault(),!0}if(y.key==="Delete")return o.value.length===0?void 0:(c.createDialog(nt,{hashes:o.value}),y.preventDefault(),!0);if(y.key==="/"){const O=document.getElementById("searchInput");return document.activeElement!==O&&(r.push({name:"searchEngine"}),y.preventDefault()),!0}}return kt(()=>H.isVisible,y=>{!y&&!i.value&&t.unselectAllTorrents()}),De(async()=>{await v.fetchCategories(),await v.fetchTags()}),Je(()=>{document.addEventListener("keydown",ke),i.value=!1,me()}),$t(()=>{document.removeEventListener("keydown",ke)}),(y,L)=>(d(),b(F,null,[_("div",ma,[n(ca),n(be,{class:"ma-0 pa-0"},{default:s(()=>[n(Mt,null,{default:s(()=>[Ee(n(ae,{color:"transparent"},{default:s(()=>[n(W,{text:u(e)("common.selectAll"),location:"bottom"},{activator:s(({props:O})=>[n(R,G({icon:z.value?"mdi-checkbox-marked":"mdi-checkbox-blank-outline",class:"text-grey",color:"transparent",style:{left:"-8px"}},O,{onClick:Le}),null,16,["icon"])]),_:1},8,["text"]),_("span",pa,m(u(e)("dashboard.selectAll")),1)]),_:1},512),[[Ue,u(i)]])]),_:1})]),_:1}),u(I).length===0?(d(),b("div",va,[_("p",ha,m(u(e)("common.emptyList")),1)])):M("",!0),u(D).isPaginationOnTop&&!u(D).isInfiniteScrollActive&&u(S)>1?(d(),b("div",fa,[n(je,{modelValue:u(T),"onUpdate:modelValue":L[0]||(L[0]=O=>_e(T)?T.value=O:null),length:u(S),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left",onInput:me},null,8,["modelValue","length"])])):M("",!0),f.value?(d(),$(Ro,{key:2,"paginated-torrents":u(w),onOnTorrentClick:he,onOnTorrentDblClick:pe,onOnCheckboxClick:ve,onOnTorrentRightClick:ne,onStartPress:fe,onEndPress:re},null,8,["paginated-torrents"])):k.value?(d(),$(Po,{key:3,class:"mb-2","paginated-torrents":u(w),onOnTorrentClick:he,onOnTorrentDblClick:pe,onOnCheckboxClick:ve,onOnTorrentRightClick:ne,onStartPress:fe,onEndPress:re},null,8,["paginated-torrents"])):P.value?(d(),$(ia,{key:4,"paginated-torrents":u(w),onOnTorrentClick:he,onOnTorrentDblClick:pe,onOnCheckboxClick:ve,onOnTorrentRightClick:ne,onStartPress:fe,onEndPress:re},null,8,["paginated-torrents"])):M("",!0),!u(D).isPaginationOnTop&&!u(D).isInfiniteScrollActive&&u(S)>1?(d(),b("div",_a,[n(je,{modelValue:u(T),"onUpdate:modelValue":L[1]||(L[1]=O=>_e(T)?T.value=O:null),length:u(S),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left",onInput:me},null,8,["modelValue","length"])])):M("",!0)]),_("div",{style:Ct(`position: absolute; left: ${H.offset[0]}px; top: ${H.offset[1]}px;`)},[n(Zt,{modelValue:H.isVisible,"onUpdate:modelValue":L[2]||(L[2]=O=>H.isVisible=O)},null,8,["modelValue"])],4)],64))}});export{Sa as default};
